/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyBible
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// node_modules/async-mutex/index.mjs
var E_TIMEOUT = new Error("timeout while waiting for mutex to become available");
var E_ALREADY_LOCKED = new Error("mutex already locked");
var E_CANCELED = new Error("request for lock canceled");
var __awaiter$2 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Semaphore = class {
  constructor(_value, _cancelError = E_CANCELED) {
    this._value = _value;
    this._cancelError = _cancelError;
    this._weightedQueues = [];
    this._weightedWaiters = [];
  }
  acquire(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve, reject) => {
      if (!this._weightedQueues[weight - 1])
        this._weightedQueues[weight - 1] = [];
      this._weightedQueues[weight - 1].push({ resolve, reject });
      this._dispatch();
    });
  }
  runExclusive(callback, weight = 1) {
    return __awaiter$2(this, void 0, void 0, function* () {
      const [value, release] = yield this.acquire(weight);
      try {
        return yield callback(value);
      } finally {
        release();
      }
    });
  }
  waitForUnlock(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve) => {
      if (!this._weightedWaiters[weight - 1])
        this._weightedWaiters[weight - 1] = [];
      this._weightedWaiters[weight - 1].push(resolve);
      this._dispatch();
    });
  }
  isLocked() {
    return this._value <= 0;
  }
  getValue() {
    return this._value;
  }
  setValue(value) {
    this._value = value;
    this._dispatch();
  }
  release(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    this._value += weight;
    this._dispatch();
  }
  cancel() {
    this._weightedQueues.forEach((queue) => queue.forEach((entry) => entry.reject(this._cancelError)));
    this._weightedQueues = [];
  }
  _dispatch() {
    var _a;
    for (let weight = this._value; weight > 0; weight--) {
      const queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();
      if (!queueEntry)
        continue;
      const previousValue = this._value;
      const previousWeight = weight;
      this._value -= weight;
      weight = this._value + 1;
      queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);
    }
    this._drainUnlockWaiters();
  }
  _newReleaser(weight) {
    let called = false;
    return () => {
      if (called)
        return;
      called = true;
      this.release(weight);
    };
  }
  _drainUnlockWaiters() {
    for (let weight = this._value; weight > 0; weight--) {
      if (!this._weightedWaiters[weight - 1])
        continue;
      this._weightedWaiters[weight - 1].forEach((waiter) => waiter());
      this._weightedWaiters[weight - 1] = [];
    }
  }
};
var __awaiter$1 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Mutex = class {
  constructor(cancelError) {
    this._semaphore = new Semaphore(1, cancelError);
  }
  acquire() {
    return __awaiter$1(this, void 0, void 0, function* () {
      const [, releaser] = yield this._semaphore.acquire();
      return releaser;
    });
  }
  runExclusive(callback) {
    return this._semaphore.runExclusive(() => callback());
  }
  isLocked() {
    return this._semaphore.isLocked();
  }
  waitForUnlock() {
    return this._semaphore.waitForUnlock();
  }
  release() {
    if (this._semaphore.isLocked())
      this._semaphore.release();
  }
  cancel() {
    return this._semaphore.cancel();
  }
};

// main.ts
var BUILD_START_TOAST = "Bible build started!";
var BUILD_END_TOAST = "Bible build finished!";
var DEFAULT_SETTINGS = {
  translation: "",
  bible_folder: "/Bible/",
  book_name_format: "{order} {book}",
  book_name_delimiter: " ",
  chapter_name_format: "{order} {book} {chapter}",
  book_name_capitalization: "name_case",
  book_name_abbreviated: false,
  padded_order: true,
  padded_chapter: false,
  build_with_dynamic_verses: true,
  verse_body_format: "###### {verse}\n{verse_text}",
  chapter_body_format: "\n###### [[{first_chapter_name}|{book} 1 \u23EE]] | [[{last_chapter_name}|{last_chapter_book} {last_chapter} \u25C0]] | [[{book}]] | [[{next_chapter_name}|\u25B6 {next_chapter_book} {next_chapter}]] | [[{final_chapter_name}|\u23ED {book} {final_chapter}|]]\n\n{verses}\n\n###### [[{first_chapter_name}|{book} 1 \u23EE]] | [[{last_chapter_name}|{last_chapter_book} {last_chapter} \u25C0]] | [[{book}]] | [[{next_chapter_name}|\u25B6 {next_chapter_book} {next_chapter}]] | [[{final_chapter_name}|\u23ED {book} {final_chapter}|]]\n\n",
  store_locally: false,
  _built_translation: "",
  set_translation: async function(val, plugin) {
    let has_translation = false;
    let translations = await plugin.bible_api.get_translations();
    if (!(val in translations)) {
      this.translation = await plugin.bible_api.get_default_translation();
    } else {
      this.translation = val;
    }
  }
};
function httpGet(theUrl) {
  return new Promise(async (ok, err) => {
    ok(await (0, import_obsidian.requestUrl)(theUrl).text);
  });
}
function is_alpha(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 39 && char < 42) {
      continue;
    }
    return false;
  }
  return true;
}
function is_alphanumeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
function is_numeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
var MyBible = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.bible_api = new BollsLifeBibleAPI();
    this.bible_api.plugin = this;
    await this.settings.set_translation(this.settings.translation, this);
    this.addCommand({
      id: "create_bible_files",
      name: "Build bible",
      callback: async () => {
        let bible_path = (0, import_obsidian.normalizePath)(this.settings.bible_folder);
        let bible_folder = this.app.vault.getAbstractFileByPath(bible_path);
        if (bible_folder instanceof import_obsidian.TFile) {
          new ErrorModal(
            this.app,
            this,
            "Failed to build bible",
            'The bible folder defined in settings, "{0}", was expected to point to a folder, but it points to a file. Try changing the path to point to a folder, or change the file to a folder.'.format(this.settings.bible_folder)
          ).open();
          return;
        } else if (bible_folder === null) {
          this.app.vault.adapter.mkdir(bible_path);
        } else {
        }
        let folders_and_files = await this.app.vault.adapter.list(bible_path);
        if (folders_and_files.files.length + folders_and_files.folders.length != 0) {
          new ClearOldBibleFilesModal(this.app, this).open();
        } else {
          new import_obsidian.Notice(BUILD_START_TOAST);
          await this.build_bible(bible_path);
          new import_obsidian.Notice(BUILD_END_TOAST);
        }
      }
    });
    this.addCommand({
      id: "clear_cache",
      name: "Clear cache",
      callback: async () => {
        new ClearCacheFilesModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "download_bible",
      name: "Download translation",
      callback: async () => {
        new DownloadBibleModal(
          this.app,
          this
        ).open();
      }
    });
    this.registerMarkdownCodeBlockProcessor("verse", async (source, element, context) => {
      const ref = source.trim().replace(/[:-]/g, " ").split(" ");
      let book = null;
      let book_id = -1;
      let chapter = -1;
      let verse = -1;
      let verse_end = -1;
      let maybe_translation = null;
      let i = 0;
      while (i != ref.length) {
        if (i == 0) {
          book = (book || "") + ref[i];
        } else {
          if (!is_alpha(ref[i])) {
            break;
          }
          book += " " + ref[i];
        }
        i += 1;
      }
      if (is_numeric(book || "")) {
        book_id = Number(book);
        book = null;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        chapter = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse_end = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_alphanumeric(ref[i])) {
        maybe_translation = ref[i];
        i += 1;
      }
      let translation = maybe_translation || this.settings.translation;
      if (book !== null) {
        book_id = await this.bible_api.book_id(this.settings._built_translation || translation, book);
      }
      book = (await this.bible_api.get_book(translation, book_id)).name;
      let text = "";
      if (book.length === 0) {
        text = "[Book and chapter must be provided]";
      } else if (chapter === -1) {
        text = "[Chapter must be provided]";
      } else if (verse === -1) {
        let verses = await this.bible_api.get_chapter_cached(
          translation,
          book_id,
          chapter
        );
        for (let verse_i of verses.keys()) {
          let verse2 = verses[verse_i];
          text += "<sup>" + (verse_i + 1) + "</sup> " + verse2;
          if (verse_i != verses.length - 1) {
            text += "<br>";
          }
        }
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{2}', chapter {0}]".format(String(chapter), book, translation);
        }
      } else if (verse_end < verse) {
        text = await this.bible_api.get_verse(
          translation,
          book_id,
          chapter,
          verse
        );
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{3}', chapter {0}, verse {2}]".format(String(chapter), book, String(verse), translation);
        }
      } else {
        let verses = await this.bible_api.get_chapter_cached(
          translation,
          book_id,
          chapter
        );
        let j = verse;
        while (j < verse_end + 1 && j < verses.length) {
          text += "<sup>" + j + "</sup> " + verses[j - 1];
          if (j != verse_end) {
            text += "<br>";
          }
          j += 1;
        }
        if (text.length === 0) {
          text = "[Could not find text for the book '{1}', translation '{4}', chapter {0}, verses {2}-{3}]".format(String(chapter), book, String(verse), String(verse_end), translation);
        }
      }
      let span = element.createSpan({
        text: ""
      });
      let tags = text.matchAll(
        /(?:<\s*([\w]*)\s*>(.*?)<\s*\/\1\s*>)|<\s*(br|\/br)\s*>|(.+?(?:(?=<\s*[/\\\w]*\s*>)|$))/gs
      );
      for (let match of tags) {
        let tag_type = match[1];
        let tag_text = match[2];
        let lone_tag_type = match[3];
        let normal_text = match[4];
        if (normal_text !== void 0) {
          span.createSpan({
            text: normal_text
          });
        } else if (lone_tag_type === "br") {
          span.createEl(lone_tag_type);
        } else if (lone_tag_type === "/J") {
        } else if (lone_tag_type === "br/") {
        } else if (tag_type === "sup") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "sub") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "S") {
          span.createEl(
            "sub",
            { text: tag_text, attr: { style: "opacity: 0.5" } }
          );
        } else if (tag_type === "i") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "b") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "e") {
          span.createEl("i").createEl("q", { text: tag_text });
        } else {
          span.createSpan(
            { text: "<{0}>{1}</{0}>".format(tag_type, tag_text) }
          );
        }
      }
    });
    this.addSettingTab(new SettingsTab(this.app, this));
  }
  onunload() {
  }
  async build_bible(bible_path) {
    this.settings._built_translation = this.settings.translation;
    await this.saveSettings();
    let ctx = new BuildContext();
    ctx.translation = this.settings._built_translation;
    ctx.books = await this.bible_api.get_books(
      this.settings._built_translation
    );
    ctx.verse_counts = await this.bible_api.get_verse_count(ctx.translation);
    if (!this.settings.build_with_dynamic_verses) {
      ctx.translation_texts = await this.bible_api.get_translation(ctx.translation);
    }
    for (let book of ctx.books) {
      ctx.set_book(book.id);
      let book_path = bible_path;
      if (this.settings.book_name_format.length != 0) {
        book_path += "/" + ctx.format_book_name(this, ctx.book, this.settings.book_name_capitalization);
        this.app.vault.adapter.mkdir((0, import_obsidian.normalizePath)(book_path));
      }
      let file_promises = [];
      for (const chapter_i of Array(ctx.book.chapters).keys()) {
        ctx.set_chapter(chapter_i + 1);
        ctx.verses_text = "";
        let verse = 1;
        while (verse != ctx.get_verse_count() + 1) {
          ctx.verse = verse;
          ctx.verses_text += ctx.format_verse_body(
            this,
            this.settings.build_with_dynamic_verses
          );
          if (verse != ctx.get_verse_count()) {
            ctx.verses_text += "\n";
          }
          verse += 1;
        }
        let chapter_note_name = ctx.format_chapter_name(this);
        let note_body = ctx.format_chapter_body(this);
        let file_path = (0, import_obsidian.normalizePath)(book_path + "/" + chapter_note_name + ".md");
        let file = this.app.vault.getAbstractFileByPath(file_path);
        if (file instanceof import_obsidian.TFile) {
          file_promises.push(this.app.vault.modify(file, note_body));
        } else if (file === null) {
          file_promises.push(
            this.app.vault.create(
              file_path,
              note_body
            )
          );
        }
      }
      await Promise.all(file_promises);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BuildContext = class {
  find_book(book_id) {
    for (let i of this.books.keys()) {
      if (this.books[i].id === book_id) {
        return i;
      }
    }
    throw new Error("No book by id ${book_id}");
  }
  abbreviate_book_name(name) {
    return name.replace(" ", "").slice(0, 3);
  }
  format_book_name(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name);
    }
    return plugin.settings.book_name_format.replace(
      /{order}/g,
      String(book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{book}/g, book_name);
  }
  format_book_name_without_order(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name);
    }
    return book_name;
  }
  format_chapter_body(plugin) {
    let casing = plugin.settings.book_name_capitalization;
    return plugin.settings.chapter_body_format.replace(/{verses}/g, this.verses_text).replace(/{book}/g, this.format_book_name_without_order(plugin, this.book, casing)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name(plugin)).replace(/{last_chapter}/g, String(this.last_chapter)).replace(/{last_chapter_name}/g, this.format_chapter_name(plugin, "last")).replace(/{last_chapter_book}/g, this.format_book_name_without_order(plugin, this.last_book, casing)).replace(/{next_chapter}/g, String(this.next_chapter)).replace(/{next_chapter_name}/g, this.format_chapter_name(plugin, "next")).replace(/{next_chapter_book}/g, this.format_book_name_without_order(plugin, this.next_book, casing)).replace(/{first_chapter}/g, "1").replace(/{first_chapter_name}/g, this.format_chapter_name(plugin, "first")).replace(/{final_chapter}/g, String(this.book.chapters)).replace(/{final_chapter_name}/g, this.format_chapter_name(plugin, "final"));
  }
  format_chapter_name(plugin, tense = "current") {
    let format = plugin.settings.chapter_name_format;
    if (format.length == 0) {
      format = DEFAULT_SETTINGS.chapter_name_format;
    }
    let pad_by = 3;
    if (this.get_verse_count() < 10) {
      pad_by = 1;
    } else if (this.get_verse_count() < 100) {
      pad_by = 2;
    }
    let casing = plugin.settings.book_name_capitalization;
    let delim = plugin.settings.book_name_delimiter;
    let book_name = "";
    let chapter = -1;
    switch (tense) {
      case "current": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = this.chapter;
        break;
      }
      case "last": {
        book_name = this.format_book_name_without_order(plugin, this.last_book, casing);
        chapter = this.last_chapter;
        break;
      }
      case "next": {
        book_name = this.format_book_name_without_order(plugin, this.next_book, casing);
        chapter = this.next_chapter;
        break;
      }
      case "first": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = 1;
        break;
      }
      case "final": {
        book_name = this.format_book_name_without_order(plugin, this.book, casing);
        chapter = this.book.chapters;
        break;
      }
      default:
        throw new Error("Unmatched switch case at tense '{0}'".format(tense));
    }
    return format.replace(/{book}/g, book_name).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(
      /{chapter}/g,
      String(chapter).padStart(pad_by * Number(plugin.settings.padded_chapter), "0")
    );
  }
  format_verse_body(plugin, build_with_dynamic_verses) {
    let book_name = this.format_book_name_without_order(
      plugin,
      this.book,
      "current"
    );
    let verse_text = "";
    if (build_with_dynamic_verses) {
      verse_text = "``` verse\n{book_id} {chapter} {verse} \n```";
    } else {
      verse_text = this.translation_texts.books[this.book.id][this.chapter - 1][this.verse - 1];
    }
    return plugin.settings.verse_body_format.replace(/{verse_text}/g, verse_text).replace(/{verse}/g, String(this.verse)).replace(/{book}/g, book_name).replace(/{book_id}/g, String(this.book.id)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name(plugin)).replace(/{final_chapter}/g, String(this.book.chapters));
  }
  set_book(book_id) {
    let book_i = this.find_book(book_id);
    this.book = this.books[book_i];
    let last_book_i = this.chapter !== 1 ? book_i : book_i - 1;
    if (last_book_i === -1) {
      last_book_i = this.books.length - 1;
    }
    this.last_book = this.books[last_book_i];
    let next_book_i = this.chapter !== this.book.chapters ? book_i : book_i + 1;
    if (next_book_i === this.books.length) {
      next_book_i = 0;
    }
    this.next_book = this.books[next_book_i];
  }
  set_chapter(chapter) {
    this.chapter = chapter;
    this.set_book(this.book.id);
    this.last_chapter = chapter !== 1 ? chapter - 1 : this.last_book.chapters;
    this.next_chapter = chapter !== this.book.chapters ? chapter + 1 : 1;
  }
  // Sets the capitalization of the given name depending on *name_case*.
  to_case(name, name_case, delimeter) {
    if (name_case == "lower_case") {
      return name.toLowerCase().replace(/ /g, delimeter);
    } else if (name_case == "upper_case") {
      return name.toUpperCase().replace(/ /g, delimeter);
    }
    return name.replace(/ /g, delimeter);
  }
  get_verse_count() {
    return this.verse_counts.get_count_for(this.book.id, this.chapter);
  }
};
var VerseCounts = class {
  get_count_for(book, chapter) {
    return this.books[book][chapter];
  }
};
var BibleAPI = class {
  constructor() {
    this.book_cache = {};
    this.cache_clear_timer = null;
    this.chapter_cache = {};
  }
  async cache_chapter(translation, book_id, chapter, chapter_data, save_locally) {
    let key = this.make_chapter_key(translation, book_id, chapter);
    this.chapter_cache[key] = {
      translation,
      book_id,
      chapter,
      chapter_data,
      mutex: new Mutex()
    };
    if (save_locally) {
      let cache_path = this.get_cache_path();
      this.plugin.app.vault.adapter.mkdir(cache_path);
      let cached_file_name = "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
      let cached_file_path = (0, import_obsidian.normalizePath)(
        cache_path + "/" + cached_file_name
      );
      if (chapter_data != null && !await this.plugin.app.vault.adapter.exists(cached_file_path)) {
        let body = "";
        for (let i of chapter_data.keys()) {
          body += chapter_data[i];
          if (i !== chapter_data.length - 1) {
            body += "\n";
          }
        }
        await this.plugin.app.vault.adapter.write(
          cached_file_path,
          body
        );
      }
    }
    if (this.cache_clear_timer !== null && this.cache_clear_timer_promise_err !== null) {
      this.cache_clear_timer_promise_err(null);
    }
    this.cache_clear_timer = new Promise((ok, err) => {
      this.cache_clear_timer_promise_err = err;
      setTimeout(ok, 6e4 * 60);
    });
    this.cache_clear_timer.then(() => this.clear_cache()).catch((err) => {
    });
  }
  async clear_cache() {
    this.chapter_cache = {};
    this.cache_clear_timer = null;
    let cache_path = this.get_cache_path();
    if (await this.plugin.app.vault.adapter.exists(cache_path)) {
      if (!await this.plugin.app.vault.adapter.trashSystem(cache_path)) {
        await this.plugin.app.vault.adapter.trashLocal(cache_path);
      }
    }
  }
  async book_id(translation, book_name) {
    let books = await this.get_books(translation);
    for (let i of books.keys()) {
      if (books[i].name === book_name) {
        return books[i].id;
      }
    }
    if (book_name in DEFAULT_NAME_MAP) {
      return DEFAULT_NAME_MAP[book_name];
    }
    throw new Error(
      "Translation '{0}' has no book named '{1}'".format(translation, book_name)
    );
  }
  async get_translation(translation) {
    throw new Error("unimplemented");
  }
  async get_book(translation, book_id) {
    let book_key = "{0} {1}".format(translation, String(book_id));
    if (!(book_key in this.book_cache)) {
      this.book_cache[book_key] = {
        book_id,
        translation,
        data: null,
        mutex: new Mutex()
      };
    }
    let cached = this.book_cache[book_key];
    if (cached.data === null) {
      await cached.mutex.acquire().then(async () => {
        cached.data = await this._get_book(translation, book_id);
        cached.mutex.cancel();
        cached.mutex.release();
      }).catch((err) => {
        if (err === E_CANCELED) {
        } else {
          throw new Error(err);
        }
      });
    }
    if (cached.data == null) {
      throw new Error();
    }
    return cached.data;
  }
  async _get_book(translation, book_id) {
    throw new Error("unimplemented");
  }
  get_books(translation) {
    throw new Error("unimplemented");
  }
  get_cache_path() {
    return (0, import_obsidian.normalizePath)(this.plugin.manifest.dir + "/.mybiblecache");
  }
  async get_chapter_cached(translation, book_id, chapter) {
    let chapter_key = this.make_chapter_key(translation, book_id, chapter);
    if (!(chapter_key in this.chapter_cache)) {
      this.cache_chapter(
        translation,
        book_id,
        chapter,
        null,
        false
      );
    }
    let cached = this.chapter_cache[chapter_key];
    if (cached.chapter_data === null) {
      await cached.mutex.acquire().then(async () => {
        if (this.plugin.settings.store_locally) {
          let cached_file_name = "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
          let cache_path = this.get_cache_path();
          this.plugin.app.vault.adapter.mkdir(cache_path);
          let cached_file_path = (0, import_obsidian.normalizePath)(
            cache_path + "/" + cached_file_name
          );
          if (await this.plugin.app.vault.adapter.exists(cached_file_path)) {
            let raw = await this.plugin.app.vault.adapter.read(cached_file_path);
            if (raw.startsWith("[")) {
              cached.chapter_data = JSON.parse(raw);
            } else {
              cached.chapter_data = raw.split("\n");
            }
          }
        }
        if (cached.chapter_data === null) {
          cached.chapter_data = await this.get_chapter_uncached(
            translation,
            book_id,
            chapter
          );
        }
        cached.mutex.cancel();
        cached.mutex.release();
      }).catch((err) => {
        if (err === E_CANCELED) {
        } else {
          throw new Error(err);
        }
      });
    }
    if (cached.chapter_data === null || cached.chapter_data.length == 0) {
      return [];
    }
    await this.cache_chapter(
      translation,
      book_id,
      chapter,
      cached.chapter_data,
      this.plugin.settings.store_locally
    );
    return cached.chapter_data;
  }
  async get_chapter_uncached(translation, book_id, chapter) {
    throw new Error("unimplemented");
  }
  async get_default_translation() {
    throw new Error("unimplemented");
  }
  get_translations() {
    throw new Error("unimplemented");
  }
  get_verse(translation, book_id, chapter, verse) {
    throw new Error("unimplemented");
  }
  async get_verse_count(translation) {
    throw new Error("unimplemented");
  }
  make_chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
};
var BollsLifeBibleAPI = class extends BibleAPI {
  constructor() {
    super(...arguments);
    this.chapter_cache = {};
    this.translations = {};
    this.translation_maps = {};
    this.cache_clear_timer = null;
    this.book_mutex = new Mutex();
  }
  _chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
  async _generate_translation_map(translation) {
    let map = await (0, import_obsidian.requestUrl)(
      "https://bolls.life/get-books/{0}/".format(translation)
    ).json;
    let book_data = [];
    for (let item of map) {
      book_data.push({
        name: item["name"],
        chapters: item["chapters"],
        id: item["bookid"]
      });
    }
    this.translation_maps[translation] = book_data;
  }
  async _book_to_id(translation, book) {
    let book_ = book.toLowerCase();
    let map = await this._get_translation_map("YLT");
    for (let i in map) {
      let book_data = map[i];
      if (book_ == book_data["name"].toLowerCase()) {
        return Number(i) + 1;
      }
    }
    throw new Error("No book exists by name {0}.".format(book));
  }
  async _id_to_book(translation, book_id) {
    let map = await this._get_translation_map("YLT");
    return map[book_id - 1]["name"];
  }
  async get_chapter_uncached(translation, book_id, chapter) {
    try {
      let chapter_data = JSON.parse(await httpGet(
        "https://bolls.life/get-chapter/{0}/{1}/{2}/".format(translation, String(book_id), String(chapter))
      )).map((x) => x.text);
      return chapter_data;
    } catch (e) {
      if (e instanceof Error && e.message.startsWith("No book exists by name")) {
        return [];
      }
      throw e;
    }
  }
  async _get_translation_map(translation) {
    if (!(translation in this.translation_maps)) {
      await this._generate_translation_map(translation);
    }
    return this.translation_maps[translation];
  }
  async get_translation(translation) {
    let verses = JSON.parse(
      await httpGet(
        "https://bolls.life/static/translations/{0}.json".format(translation)
      )
    );
    let bible = {
      translation,
      books: {}
    };
    await new Promise(async (ok, err) => {
      let i = 0;
      let curr_book_id = -1;
      let curr_chapter = -1;
      while (i != verses.length) {
        let verse_json = verses[i];
        if (curr_book_id != verse_json["book"]) {
          curr_book_id = verse_json["book"];
          bible.books[curr_book_id] = [];
          curr_chapter = -1;
        }
        if (curr_chapter != verse_json["chapter"]) {
          curr_chapter = verse_json["chapter"];
          let book_data = bible.books[curr_book_id];
          book_data.push([]);
        }
        bible.books[curr_book_id][curr_chapter - 1].push(verse_json["text"]);
        i += 1;
      }
      ok(null);
    });
    return bible;
  }
  async _get_book(translation, book_id) {
    let books = await this.get_books(translation);
    for (let book of books) {
      if (book.id == book_id) {
        this.book_mutex.cancel();
        this.book_mutex.release();
        return book;
      }
    }
    throw new Error();
  }
  async get_books(translation) {
    let books = await this._get_translation_map(translation);
    books.sort(function(x, y) {
      if (x.id < y.id) {
        return -1;
      }
      if (x.id > y.id) {
        return 1;
      }
      return 0;
    });
    return books;
  }
  async get_default_translation() {
    return "YLT";
  }
  async get_translations() {
    if (Object.keys(this.translations).length === 0) {
      let list = JSON.parse(await httpGet(
        "https://bolls.life/static/bolls/app/views/languages.json"
      ));
      for (let language of list) {
        for (let item of language["translations"]) {
          if (item["short_name"] in this.translations) {
            throw new Error("Translation already added to map");
          }
          this.translations[item["short_name"]] = {
            abbreviated_name: item["short_name"],
            display_name: item["full_name"],
            language: language["language"]
          };
        }
      }
    }
    return this.translations;
  }
  async get_verse(translation, book_id, chapter, verse) {
    let chapter_data = await this.get_chapter_cached(
      translation,
      book_id,
      chapter
    );
    return chapter_data[verse - 1] || "";
  }
  async get_verse_count(translation) {
    let json = JSON.parse(await httpGet(
      "https://bolls.life/get-verse-counts/{0}/".format(translation)
    ));
    let counts = new VerseCounts();
    counts.books = json;
    return counts;
  }
};
var ErrorModal = class extends import_obsidian.Modal {
  constructor(app, plugin, title, body) {
    super(app);
    this.plugin = plugin;
    this.title = title;
    this.body = body;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: this.title });
    contentEl.createEl("span", { text: this.body });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Close").onClick(() => {
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearCacheFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Clear cache?" });
    contentEl.createEl("span", {
      text: "You are about to clear out all cached chapters from your file system. This includes translations you manually downloaded.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear the cache?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear cache").setCta().onClick(async () => {
        this.close();
        await this.plugin.bible_api.clear_cache();
        new import_obsidian.Notice("Cache cleared!");
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearOldBibleFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Bible folder is not empty" });
    contentEl.createEl("span", {
      text: "The Bible folder in your settings is not empty. If you built a Bible in this folder before the new bible may be interlaced with the old one.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear the folder before building your Bible?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Build without clearing").setCta().onClick(async () => {
        this.close();
        new import_obsidian.Notice(BUILD_START_TOAST);
        await this.plugin.build_bible(bible_path);
        new import_obsidian.Notice(BUILD_END_TOAST);
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear and build").setCta().onClick(async () => {
        this.close();
        new import_obsidian.Notice(BUILD_START_TOAST);
        let list = await this.app.vault.adapter.list(bible_path);
        for (let path of list.files) {
          let abstract = this.app.vault.getAbstractFileByPath(
            path
          );
          if (abstract != null) {
            await this.app.vault.delete(abstract, true);
          }
        }
        for (let path of list.folders) {
          let abstract = this.app.vault.getAbstractFileByPath(
            path
          );
          if (abstract != null) {
            await this.app.vault.delete(abstract, true);
          }
        }
        await this.plugin.build_bible(bible_path);
        new import_obsidian.Notice(BUILD_END_TOAST);
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var DownloadBibleModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let translation = this.plugin.settings.translation;
    contentEl.createEl("h1", { text: "Download bible?" });
    contentEl.createEl("span", {
      text: "You are about to download the entire {0} translation of the Bible, according to your settings.".format(translation)
    });
    contentEl.createEl("p", {
      text: "Do you want to continue?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Download").setCta().onClick(() => {
        this.close();
        this.downloadBible(translation);
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  async downloadBible(translation) {
    new import_obsidian.Notice(
      "Started download of the {0} translation!".format(translation)
    );
    let bible = await this.plugin.bible_api.get_translation(translation);
    for (const book_id in bible.books) {
      for (let chapter of Array(bible.books[book_id].length).keys()) {
        await this.plugin.bible_api.cache_chapter(
          translation,
          Number(book_id),
          chapter + 1,
          bible.books[book_id][chapter],
          true
        );
      }
    }
    new import_obsidian.Notice(
      "Completed download of the {0} translation!".format(translation)
    );
  }
};
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Translation").setDesc("The version of the Bible to display.").addDropdown(async (drop) => {
      let translations = await this.plugin.bible_api.get_translations();
      for (const key in translations) {
        drop.addOption(
          key,
          "{0} - {1} - {2}".format(
            translations[key].language,
            key,
            translations[key].display_name
          )
        );
      }
      drop.onChange(async (value) => {
        this.plugin.settings.translation = value;
        await this.plugin.saveSettings();
      });
      drop.setValue(this.plugin.settings.translation);
    });
    new import_obsidian.Setting(containerEl).setName("Bible folder").setDesc("A path to the folder where all the files for the bible will be placed. If the path does not exist it will be created.").addText(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.bible_folder).setValue(this.plugin.settings.bible_folder).onChange(async (value) => {
        this.plugin.settings.bible_folder = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setHeading().setName("Book Formatting");
    new import_obsidian.Setting(containerEl).setName("Book name capitalization").setDesc("Capitalization for the names of the notes of each book.").addDropdown(
      (drop) => drop.addOption("lower_case", "Lower case").addOption("name_case", "Name case").addOption("upper_case", "Upper case").setValue(this.plugin.settings.book_name_capitalization).onChange(async (value) => {
        this.plugin.settings.book_name_capitalization = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Abbreviate book names").setDesc('Abbreviates book names to three letters so that, for example, "Genesis" becomes "Gen" and "1 Kings" becomes "1Ki". (May cause issues in some languages)').addToggle((toggle) => toggle.setValue(this.plugin.settings.book_name_abbreviated).onChange(async (value) => {
      this.plugin.settings.book_name_abbreviated = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Padded order numbers").setDesc('When ON, changes "{order}" in the names of book folders to be padded with extra zeros. For example, "1 Genesis" would become "01 Gensis" when turned ON.').addToggle((toggle) => toggle.setValue(this.plugin.settings.padded_order).onChange(async (value) => {
      this.plugin.settings.padded_order = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Book name delimiter").setDesc('The characters separating words in book names, such as the spaces in "1 John" or "Song of Solomon".').addText((text) => text.setPlaceholder('Example: "' + DEFAULT_SETTINGS.book_name_format + '"').setValue(this.plugin.settings.book_name_delimiter).onChange(async (value) => {
      this.plugin.settings.book_name_delimiter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Book name format").setDesc('Formatting for the names of the folders of each book of the bible. For example, "{order} {name}" would become "2 Exodus". Leave blank to not have folders for each book.').addText((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.book_name_format).setValue(this.plugin.settings.book_name_format).onChange(async (value) => {
      this.plugin.settings.book_name_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Chapter Formatting");
    new import_obsidian.Setting(containerEl).setName("Padded chapter numbers").setDesc('When ON, changes "{chapter}" (and related) in the names of chapters to be padded with extra zeros. For example, "Psalms 5" would become "Psalms 005" when turned ON.').addToggle((toggle) => toggle.setValue(this.plugin.settings.padded_chapter).onChange(async (value) => {
      this.plugin.settings.padded_chapter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Chapter name format").setDesc('Formatting for the names of the notes of each chapter of a book. For example, "{book} {chapter}" would become "Psalms 23.md".').addText((text) => text.setPlaceholder(this.plugin.settings.chapter_name_format).setValue(this.plugin.settings.chapter_name_format).onChange(async (value) => {
      this.plugin.settings.chapter_name_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Chapter body format").setDesc("Formatting for the body of chapter notes.").addTextArea((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.chapter_body_format).setValue(this.plugin.settings.chapter_body_format).onChange(async (value) => {
      this.plugin.settings.chapter_body_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Verse Formatting");
    new import_obsidian.Setting(containerEl).setName("Build with dynamic verses").setDesc("When ON, the text of verses will be saved as verse references that are loaded as you read it. When OFF, saves the text for your current translation into the built files.").addToggle((toggle) => toggle.setValue(this.plugin.settings.build_with_dynamic_verses).onChange(async (value) => {
      this.plugin.settings.build_with_dynamic_verses = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Verse body format").setDesc("Formatting for the body of verses in chapters.").addTextArea((text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.verse_body_format).setValue(this.plugin.settings.verse_body_format).onChange(async (value) => {
      this.plugin.settings.verse_body_format = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setHeading().setName("Data");
    new import_obsidian.Setting(containerEl).setName("Save bible locally").setDesc("When ON, caches viewed chapters on the local file system, so that they can be accessed without an internet connection.").addToggle((toggle) => toggle.setValue(this.plugin.settings.store_locally).onChange(async (value) => {
      this.plugin.settings.store_locally = value;
      await this.plugin.saveSettings();
    }));
  }
};
var DEFAULT_NAME_MAP = {
  "Genesis": 1,
  "Exodus": 2,
  "Leviticus": 3,
  "Numbers": 4,
  "Deuteronomy": 5,
  "Joshua": 6,
  "Judges": 7,
  "Ruth": 8,
  "1 Samuel": 9,
  "2 Samuel": 10,
  "1 Kings": 11,
  "2 Kings": 12,
  "1 Chronicles": 13,
  "2 Chronicles": 14,
  "Ezra": 15,
  "Nehemiah": 16,
  "Esther": 17,
  "Job": 18,
  "Psalms": 19,
  "Psalm": 19,
  // Alternate spelling
  "Proverbs": 20,
  "Ecclesiastes": 21,
  "Song of Solomon": 22,
  "Isaiah": 23,
  "Jeremiah": 24,
  "Lamentations": 25,
  "Ezekiel": 26,
  "Daniel": 27,
  "Hosea": 28,
  "Joel": 29,
  "Amos": 30,
  "Obadiah": 31,
  "Jonah": 32,
  "Micah": 33,
  "Nahum": 34,
  "Habakkuk": 35,
  "Zephaniah": 36,
  "Haggai": 37,
  "Zechariah": 38,
  "Malachi": 39,
  "Matthew": 40,
  "Mark": 41,
  "Luke": 42,
  "John": 43,
  "Acts": 44,
  "Romans": 45,
  "1 Corinthians": 46,
  "2 Corinthians": 47,
  "Galatians": 48,
  "Ephesians": 49,
  "Philippians": 50,
  "Colossians": 51,
  "1 Thessalonians": 52,
  "2 Thessalonians": 53,
  "1 Timothy": 54,
  "2 Timothy": 55,
  "Titus": 56,
  "Philemon": 57,
  "Hebrews": 58,
  "James": 59,
  "1 Peter": 60,
  "2 Peter": 61,
  "1 John": 62,
  "2 John": 63,
  "3 John": 64,
  "Jude": 65,
  "Revelation": 66,
  "1 Esdras": 67,
  "Tobit": 68,
  "Judith": 69,
  "Wisdom": 70,
  "Sirach": 71,
  "Epistle of Jeremiah": 72,
  "Baruch": 73,
  "1 Maccabees": 74,
  "2 Maccabees": 75,
  "2 Esdras": 77,
  // Jump in number
  "Susanna": 78,
  "Bel and Dragon": 79,
  "Prayer of Manasseh": 83,
  // Jump in number
  "Azariah": 88
  // Jump in number
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJub2RlX21vZHVsZXMvYXN5bmMtbXV0ZXgvaW5kZXgubWpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRBcHAsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0VEZpbGUsXG5cdFRGb2xkZXIsXG5cdG5vcm1hbGl6ZVBhdGgsXG5cdHJlcXVlc3RVcmwsXG59IGZyb20gJ29ic2lkaWFuJztcblxuaW1wb3J0IHsgRV9DQU5DRUxFRCwgTXV0ZXggfSBmcm9tICdhc3luYy1tdXRleCc7XG5cbmNvbnN0IEJVSUxEX1NUQVJUX1RPQVNUID0gXCJCaWJsZSBidWlsZCBzdGFydGVkIVwiO1xuY29uc3QgQlVJTERfRU5EX1RPQVNUID0gXCJCaWJsZSBidWlsZCBmaW5pc2hlZCFcIjtcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmNsYXNzIE15QmlibGVTZXR0aW5ncyB7XG5cdHRyYW5zbGF0aW9uOiBzdHJpbmc7XG5cdGJpYmxlX2ZvbGRlcjogc3RyaW5nO1xuXG5cdHN0b3JlX2xvY2FsbHk6IGJvb2xlYW47XG5cblx0cGFkZGVkX29yZGVyOiBib29sZWFuO1xuXHRib29rX25hbWVfZm9ybWF0OiBzdHJpbmc7XG5cdGJvb2tfbmFtZV9kZWxpbWl0ZXI6IHN0cmluZztcblx0Ym9va19uYW1lX2NhcGl0YWxpemF0aW9uOiBzdHJpbmc7XG5cdGJvb2tfbmFtZV9hYmJyZXZpYXRlZDogYm9vbGVhbjtcblxuXHRwYWRkZWRfY2hhcHRlcjogYm9vbGVhbjtcblx0Y2hhcHRlcl9uYW1lX2Zvcm1hdDogc3RyaW5nO1xuXHRjaGFwdGVyX2JvZHlfZm9ybWF0OiBzdHJpbmc7XG5cblx0YnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlczogYm9vbGVhbjtcblx0dmVyc2VfYm9keV9mb3JtYXQ6IHN0cmluZztcblxuXHRfYnVpbHRfdHJhbnNsYXRpb246IHN0cmluZztcblxuXHRhc3luYyBzZXRfdHJhbnNsYXRpb24odmFsOiBzdHJpbmcsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdGxldCBoYXNfdHJhbnNsYXRpb24gPSBmYWxzZTtcblx0XHRsZXQgdHJhbnNsYXRpb25zID0gKGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpKTtcblx0XHRpZiAoISh2YWwgaW4gdHJhbnNsYXRpb25zKSkge1xuXHRcdFx0Zm9yIChsZXQgdHJhbnNsYXRpb24gaW4gdHJhbnNsYXRpb25zKSB7XG5cdFx0XHRcdHRoaXMudHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvblxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnRyYW5zbGF0aW9uID0gdmFsO1xuXHRcdH1cblx0fVxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeUJpYmxlU2V0dGluZ3MgPSB7XG5cdHRyYW5zbGF0aW9uOiBcIlwiLFxuXHRiaWJsZV9mb2xkZXI6IFwiL0JpYmxlL1wiLFxuXHRib29rX25hbWVfZm9ybWF0OiBcIntvcmRlcn0ge2Jvb2t9XCIsXG5cdGJvb2tfbmFtZV9kZWxpbWl0ZXI6IFwiIFwiLFxuXHRjaGFwdGVyX25hbWVfZm9ybWF0OiBcIntvcmRlcn0ge2Jvb2t9IHtjaGFwdGVyfVwiLFxuXHRib29rX25hbWVfY2FwaXRhbGl6YXRpb246IFwibmFtZV9jYXNlXCIsXG5cdGJvb2tfbmFtZV9hYmJyZXZpYXRlZDogZmFsc2UsXG5cdHBhZGRlZF9vcmRlcjogdHJ1ZSxcblx0cGFkZGVkX2NoYXB0ZXI6IGZhbHNlLFxuXHRidWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzOiB0cnVlLFxuXHR2ZXJzZV9ib2R5X2Zvcm1hdDogXCIjIyMjIyMge3ZlcnNlfVxcblwiXG5cdFx0KyBcInt2ZXJzZV90ZXh0fVwiLFxuXHRjaGFwdGVyX2JvZHlfZm9ybWF0OiBcIlxcblwiXG5cdFx0KyBcIiMjIyMjIyBbW3tmaXJzdF9jaGFwdGVyX25hbWV9fHtib29rfSAxIFx1MjNFRV1dIHwgW1t7bGFzdF9jaGFwdGVyX25hbWV9fHtsYXN0X2NoYXB0ZXJfYm9va30ge2xhc3RfY2hhcHRlcn0gXHUyNUMwXV0gfCBbW3tib29rfV1dIHwgW1t7bmV4dF9jaGFwdGVyX25hbWV9fFx1MjVCNiB7bmV4dF9jaGFwdGVyX2Jvb2t9IHtuZXh0X2NoYXB0ZXJ9XV0gfCBbW3tmaW5hbF9jaGFwdGVyX25hbWV9fFx1MjNFRCB7Ym9va30ge2ZpbmFsX2NoYXB0ZXJ9fF1dXFxuXCJcblx0XHQrIFwiXFxuXCJcblx0XHQrIFwie3ZlcnNlc31cXG5cIlxuXHRcdCsgXCJcXG5cIlxuXHRcdCsgXCIjIyMjIyMgW1t7Zmlyc3RfY2hhcHRlcl9uYW1lfXx7Ym9va30gMSBcdTIzRUVdXSB8IFtbe2xhc3RfY2hhcHRlcl9uYW1lfXx7bGFzdF9jaGFwdGVyX2Jvb2t9IHtsYXN0X2NoYXB0ZXJ9IFx1MjVDMF1dIHwgW1t7Ym9va31dXSB8IFtbe25leHRfY2hhcHRlcl9uYW1lfXxcdTI1QjYge25leHRfY2hhcHRlcl9ib29rfSB7bmV4dF9jaGFwdGVyfV1dIHwgW1t7ZmluYWxfY2hhcHRlcl9uYW1lfXxcdTIzRUQge2Jvb2t9IHtmaW5hbF9jaGFwdGVyfXxdXVxcblwiXG5cdFx0KyBcIlxcblwiLFxuXHRzdG9yZV9sb2NhbGx5OiBmYWxzZSxcblxuXHRfYnVpbHRfdHJhbnNsYXRpb246IFwiXCIsXG5cblx0c2V0X3RyYW5zbGF0aW9uOiBhc3luYyBmdW5jdGlvbiAodmFsOiBzdHJpbmcsIHBsdWdpbjogTXlCaWJsZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBoYXNfdHJhbnNsYXRpb24gPSBmYWxzZTtcblx0XHRsZXQgdHJhbnNsYXRpb25zID0gKGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpKTtcblx0XHRpZiAoISh2YWwgaW4gdHJhbnNsYXRpb25zKSkge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IHZhbDtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gaHR0cEdldCh0aGVVcmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAob2ssIGVycikgPT4ge1xuXHRcdG9rKGF3YWl0IHJlcXVlc3RVcmwodGhlVXJsKS50ZXh0KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGlzX2FscGhhKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiAzOSAmJiBjaGFyIDwgNDIpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfYWxwaGFudW1lcmljKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfbnVtZXJpYyhzdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRmb3IgKGxldCBjaGFyX3N0ciBvZiBzdHJpbmcpIHtcblx0XHRsZXQgY2hhciA9IGNoYXJfc3RyLmNoYXJDb2RlQXQoMCk7XG5cdFx0aWYgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpIHtcblx0XHRcdC8vIENoYXJhY3RlciBpcyBhIG51bWJlciwgY29udGludWVcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHQvLyBDaGFyYWN0ZXIgaXMgbm90IG51bWJlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgbnVtYmVycywgcmV0dXJuIHRydWVcblx0cmV0dXJuIHRydWU7XG59XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeUJpYmxlIGV4dGVuZHMgUGx1Z2luIHtcblx0YmlibGVfYXBpOiBCaWJsZUFQSTtcblx0c2V0dGluZ3M6IE15QmlibGVTZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYmlibGVfYXBpID0gbmV3IEJvbGxzTGlmZUJpYmxlQVBJKCk7XG5cdFx0dGhpcy5iaWJsZV9hcGkucGx1Z2luID0gdGhpcztcblxuXHRcdGF3YWl0IHRoaXMuc2V0dGluZ3Muc2V0X3RyYW5zbGF0aW9uKHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb24sIHRoaXMpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2ltcGxlIGNvbW1hbmQgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGFueXdoZXJlXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY3JlYXRlX2JpYmxlX2ZpbGVzJyxcblx0XHRcdG5hbWU6ICdCdWlsZCBiaWJsZScsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRsZXQgYmlibGVfcGF0aCA9IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpO1xuXG5cdFx0XHRcdGxldCBiaWJsZV9mb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmlibGVfcGF0aCk7XG5cdFx0XHRcdGlmIChiaWJsZV9mb2xkZXIgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRcdC8vIENhbid0IGhhbmRsZSBpZiBiaWJsZSBwYXRoIGlzIGEgZmlsZS4gQWJvcnRcblx0XHRcdFx0XHRuZXcgRXJyb3JNb2RhbChcblx0XHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdFwiRmFpbGVkIHRvIGJ1aWxkIGJpYmxlXCIsXG5cdFx0XHRcdFx0XHRcIlRoZSBiaWJsZSBmb2xkZXIgZGVmaW5lZCBpbiBzZXR0aW5ncywgXFxcInswfVxcXCIsIHdhcyBleHBlY3RlZCB0byBwb2ludCB0byBhIGZvbGRlciwgYnV0IGl0IHBvaW50cyB0byBhIGZpbGUuIFRyeSBjaGFuZ2luZyB0aGUgcGF0aCB0byBwb2ludCB0byBhIGZvbGRlciwgb3IgY2hhbmdlIHRoZSBmaWxlIHRvIGEgZm9sZGVyLlwiXG5cdFx0XHRcdFx0XHRcdC5mb3JtYXQodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpLFxuXHRcdFx0XHRcdCkub3BlbigpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmIChiaWJsZV9mb2xkZXIgPT09IG51bGwpIHtcblx0XHRcdFx0XHQvLyBCaWJsZSBwYXRoIGRvZXNuJ3QgZXhpc3QuIENyZWF0ZSBpdFxuXHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoYmlibGVfcGF0aCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQmlibGUgcGF0aCBpcyBhbHJlYWR5IGEgdmFsaWQgZm9sZGVyLiBObyBhY3Rpb24gbmVlZGVkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgZm9sZGVyc19hbmRfZmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QoYmlibGVfcGF0aCk7XG5cdFx0XHRcdGlmIChmb2xkZXJzX2FuZF9maWxlcy5maWxlcy5sZW5ndGggKyBmb2xkZXJzX2FuZF9maWxlcy5mb2xkZXJzLmxlbmd0aCAhPSAwKSB7XG5cdFx0XHRcdFx0bmV3IENsZWFyT2xkQmlibGVGaWxlc01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShCVUlMRF9TVEFSVF9UT0FTVCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5idWlsZF9iaWJsZShiaWJsZV9wYXRoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKEJVSUxEX0VORF9UT0FTVCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NsZWFyX2NhY2hlJyxcblx0XHRcdG5hbWU6ICdDbGVhciBjYWNoZScsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ2xlYXJDYWNoZUZpbGVzTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2Rvd25sb2FkX2JpYmxlJyxcblx0XHRcdG5hbWU6ICdEb3dubG9hZCB0cmFuc2xhdGlvbicsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHQvLyBUT0RPOiBPcGVuIGEgZGlhbG9ndWUgdG8gY29uZmlybSBkb3dubG9hZGluZyBhbiBlbnRpcmUgYmlibGVcblx0XHRcdFx0bmV3IERvd25sb2FkQmlibGVNb2RhbChcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHQpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcInZlcnNlXCIsIGFzeW5jIChzb3VyY2UsIGVsZW1lbnQsIGNvbnRleHQpID0+IHtcblx0XHRcdGNvbnN0IHJlZiA9IHNvdXJjZS50cmltKCkucmVwbGFjZSgvWzotXS9nLCBcIiBcIikuc3BsaXQoXCIgXCIpO1xuXG5cdFx0XHRsZXQgYm9vazpzdHJpbmd8bnVsbCA9IG51bGw7XG5cdFx0XHRsZXQgYm9va19pZCA9IC0xO1xuXHRcdFx0bGV0IGNoYXB0ZXIgPSAtMTtcblx0XHRcdGxldCB2ZXJzZSA9IC0xO1xuXHRcdFx0bGV0IHZlcnNlX2VuZCA9IC0xO1xuXHRcdFx0bGV0IG1heWJlX3RyYW5zbGF0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRcdGxldCBpID0gMDtcblxuXHRcdFx0d2hpbGUgKGkgIT0gcmVmLmxlbmd0aCkge1xuXHRcdFx0XHQvLyBDb21wb3NlIGJvb2sgbmFtZVxuXHRcdFx0XHRpZiAoaSA9PSAwKSB7XG5cdFx0XHRcdFx0Ly8gQWx3YXlzIGFkZCBmaXJzdCBpdGVtLCBubyBtYXR0ZXIgd2hhdCBpdCBpc1xuXHRcdFx0XHRcdGJvb2sgPSAoYm9vayB8fCBcIlwiKSArIHJlZltpXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBPbmx5IGFkZCBpdGVtcyB0aGF0IGFyZSB3b3JkcywgYW5kIG5vdCBudW1iZXJzXG5cdFx0XHRcdFx0aWYgKCFpc19hbHBoYShyZWZbaV0pKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ym9vayArPSBcIiBcIiArIHJlZltpXVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSArPSAxO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGlzX251bWVyaWMoYm9vayB8fCBcIlwiKSkge1xuXHRcdFx0XHQvLyBDb21wb3NlIGJvb2tfaWRcblx0XHRcdFx0Ym9va19pZCA9IE51bWJlcihib29rKTtcblx0XHRcdFx0Ym9vayA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpICE9IHJlZi5sZW5ndGggJiYgaXNfbnVtZXJpYyhyZWZbaV0pKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgY2hhcHRlclxuXHRcdFx0XHRjaGFwdGVyID0gTnVtYmVyKHJlZltpXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19udW1lcmljKHJlZltpXSkpIHtcblx0XHRcdFx0Ly8gQ29tcG9zZSB2ZXJzZVxuXHRcdFx0XHR2ZXJzZSA9IE51bWJlcihyZWZbaV0pO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpICE9IHJlZi5sZW5ndGggJiYgaXNfbnVtZXJpYyhyZWZbaV0pKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgcmFuZ2Vcblx0XHRcdFx0dmVyc2VfZW5kID0gTnVtYmVyKHJlZltpXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19hbHBoYW51bWVyaWMocmVmW2ldKSkge1xuXHRcdFx0XHQvLyBDb21wb3NlIHRyYW5zbGF0aW9uXG5cdFx0XHRcdG1heWJlX3RyYW5zbGF0aW9uID0gcmVmW2ldO1xuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cblx0XHRcdGxldCB0cmFuc2xhdGlvbiA9IG1heWJlX3RyYW5zbGF0aW9uIHx8IHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb247XG5cdFx0XHRpZiAoYm9vayAhPT0gbnVsbCkge1xuXHRcdFx0XHRib29rX2lkID0gYXdhaXQgdGhpcy5iaWJsZV9hcGlcblx0XHRcdFx0XHQuYm9va19pZCh0aGlzLnNldHRpbmdzLl9idWlsdF90cmFuc2xhdGlvbnx8dHJhbnNsYXRpb24sIGJvb2spO1xuXHRcdFx0fVxuXHRcdFx0Ym9vayA9IChhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfYm9vayh0cmFuc2xhdGlvbiwgYm9va19pZCkpLm5hbWU7XG5cdFx0XHRcblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblx0XHRcdGlmIChib29rLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQm9vayBhbmQgY2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmIChjaGFwdGVyID09PSAtMSkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQ2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmICh2ZXJzZSA9PT0gLTEpIHtcblx0XHRcdFx0Ly8gV2hvbGUgY2hhcHRlclxuXHRcdFx0XHRsZXQgdmVyc2VzID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X2NoYXB0ZXJfY2FjaGVkKFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0KTtcblx0XHRcdFx0Zm9yIChsZXQgdmVyc2VfaSBvZiB2ZXJzZXMua2V5cygpKSB7XG5cdFx0XHRcdFx0bGV0IHZlcnNlID0gdmVyc2VzW3ZlcnNlX2ldO1xuXHRcdFx0XHRcdHRleHQgKz0gXCI8c3VwPlwiICsgKHZlcnNlX2kgKyAxKSArIFwiPC9zdXA+IFwiICsgdmVyc2U7XG5cdFx0XHRcdFx0aWYgKHZlcnNlX2kgIT0gdmVyc2VzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdHRleHQgKz0gXCI8YnI+XCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHRleHQgPSBcIltDb3VsZCBub3QgZmluZCB0ZXh0IGZvciB0aGUgYm9vayAnezF9JywgdHJhbnNsYXRpb24gJ3syfScsIGNoYXB0ZXIgezB9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodmVyc2VfZW5kIDwgdmVyc2UpIHtcblx0XHRcdFx0Ly8gU2luZ2xlIHZlcnNlXG5cdFx0XHRcdHRleHQgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfdmVyc2UoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHRcdHZlcnNlLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAodGV4dC5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHR0ZXh0ID0gXCJbQ291bGQgbm90IGZpbmQgdGV4dCBmb3IgdGhlIGJvb2sgJ3sxfScsIHRyYW5zbGF0aW9uICd7M30nLCBjaGFwdGVyIHswfSwgdmVyc2UgezJ9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgU3RyaW5nKHZlcnNlKSwgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFZlcnNlIHJhbmdlXG5cdFx0XHRcdGxldCB2ZXJzZXMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfY2hhcHRlcl9jYWNoZWQoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRsZXQgaiA9IHZlcnNlO1xuXHRcdFx0XHR3aGlsZSAoaiA8IHZlcnNlX2VuZCArIDEgJiYgaiA8IHZlcnNlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHR0ZXh0ICs9IFwiPHN1cD5cIiArIGogKyBcIjwvc3VwPiBcIiArIHZlcnNlc1tqIC0gMV07XG5cdFx0XHRcdFx0aWYgKGogIT0gdmVyc2VfZW5kKSB7XG5cdFx0XHRcdFx0XHR0ZXh0ICs9IFwiPGJyPlwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRqICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRleHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0dGV4dCA9IFwiW0NvdWxkIG5vdCBmaW5kIHRleHQgZm9yIHRoZSBib29rICd7MX0nLCB0cmFuc2xhdGlvbiAnezR9JywgY2hhcHRlciB7MH0sIHZlcnNlcyB7Mn0tezN9XVwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgU3RyaW5nKHZlcnNlKSwgU3RyaW5nKHZlcnNlX2VuZCksIHRyYW5zbGF0aW9uKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGxldCBzcGFuID0gZWxlbWVudC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogXCJcIixcblx0XHRcdH0pO1xuXG5cdFx0XHRsZXQgdGFncyA9IHRleHQubWF0Y2hBbGwoXG5cdFx0XHRcdC8oPzo8XFxzKihbXFx3XSopXFxzKj4oLio/KTxcXHMqXFwvXFwxXFxzKj4pfDxcXHMqKGJyfFxcL2JyKVxccyo+fCguKz8oPzooPz08XFxzKlsvXFxcXFxcd10qXFxzKj4pfCQpKS9nc1xuXHRcdFx0KTtcblx0XHRcdGZvciAobGV0IG1hdGNoIG9mIHRhZ3MpIHtcblx0XHRcdFx0bGV0IHRhZ190eXBlID0gbWF0Y2hbMV07XG5cdFx0XHRcdGxldCB0YWdfdGV4dCA9IG1hdGNoWzJdO1xuXHRcdFx0XHRsZXQgbG9uZV90YWdfdHlwZSA9IG1hdGNoWzNdO1xuXHRcdFx0XHRsZXQgbm9ybWFsX3RleHQgPSBtYXRjaFs0XTtcblx0XHRcdFx0aWYgKG5vcm1hbF90ZXh0ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHRcdFx0dGV4dDogbm9ybWFsX3RleHQsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAobG9uZV90YWdfdHlwZSA9PT0gXCJiclwiKSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbChsb25lX3RhZ190eXBlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChsb25lX3RhZ190eXBlID09PSBcIi9KXCIpIHtcblx0XHRcdFx0XHQvKiBEbyBub3RoaW5nICovXG5cdFx0XHRcdH0gZWxzZSBpZiAobG9uZV90YWdfdHlwZSA9PT0gXCJici9cIikge1xuXHRcdFx0XHRcdC8qIERvIG5vdGhpbmcgKi9cblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJzdXBcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwodGFnX3R5cGUsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwic3ViXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcIlNcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwoXG5cdFx0XHRcdFx0XHRcInN1YlwiLFxuXHRcdFx0XHRcdFx0eyB0ZXh0OiB0YWdfdGV4dCwgYXR0cjogeyBzdHlsZTogXCJvcGFjaXR5OiAwLjVcIiB9IH0sXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJpXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcImJcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwodGFnX3R5cGUsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwiZVwiKSB7XG5cdFx0XHRcdFx0Ly8vIEEgcXVvdGUgZnJvbSBmcm9tIGVsc2V3aGVyZSBpbiB0aGUgYmlibGUuXG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbChcImlcIikuY3JlYXRlRWwoXCJxXCIsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVTcGFuKFxuXHRcdFx0XHRcdFx0eyB0ZXh0OiBcIjx7MH0+ezF9PC97MH0+XCIuZm9ybWF0KHRhZ190eXBlLCB0YWdfdGV4dCkgfSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGJ1aWxkX2JpYmxlKGJpYmxlX3BhdGg6IHN0cmluZykge1xuXHRcdC8vIFRPRE86IEJ1aWxkIGJpYmxlcyBhY2NvcmRpbmcgdG8gdHJhbnNsYXRpb24gaW4gc2V0dGluZ3Ncblx0XHR0aGlzLnNldHRpbmdzLl9idWlsdF90cmFuc2xhdGlvbiA9IHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb247XG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcblx0XHRsZXQgY3R4ID0gbmV3IEJ1aWxkQ29udGV4dDtcblx0XHRjdHgudHJhbnNsYXRpb24gPSB0aGlzLnNldHRpbmdzLl9idWlsdF90cmFuc2xhdGlvbjtcblx0XHRjdHguYm9va3MgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfYm9va3MoXG5cdFx0XHR0aGlzLnNldHRpbmdzLl9idWlsdF90cmFuc2xhdGlvblxuXHRcdCk7XG5cdFx0Y3R4LnZlcnNlX2NvdW50cyA9IGF3YWl0IHRoaXMuYmlibGVfYXBpLmdldF92ZXJzZV9jb3VudChjdHgudHJhbnNsYXRpb24pO1xuXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMpIHtcblx0XHRcdGN0eC50cmFuc2xhdGlvbl90ZXh0cyA9IGF3YWl0IHRoaXMuYmlibGVfYXBpXG5cdFx0XHRcdC5nZXRfdHJhbnNsYXRpb24oY3R4LnRyYW5zbGF0aW9uKTtcblx0XHR9XG5cblx0XHRmb3IgKGxldCBib29rIG9mIGN0eC5ib29rcykge1xuXHRcdFx0Y3R4LnNldF9ib29rKGJvb2suaWQpO1xuXG5cdFx0XHQvLyBCb29rIHBhdGhcblx0XHRcdGxldCBib29rX3BhdGggPSBiaWJsZV9wYXRoO1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuYm9va19uYW1lX2Zvcm1hdC5sZW5ndGggIT0gMCkge1xuXHRcdFx0XHRib29rX3BhdGggKz0gXCIvXCIgKyBjdHguZm9ybWF0X2Jvb2tfbmFtZSh0aGlzLCBjdHguYm9vaywgdGhpcy5zZXR0aW5ncy5ib29rX25hbWVfY2FwaXRhbGl6YXRpb24pO1xuXHRcdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKG5vcm1hbGl6ZVBhdGgoYm9va19wYXRoKSk7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBmaWxlX3Byb21pc2VzOiBBcnJheTxQcm9taXNlPGFueT4+ID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJfaSBvZiBBcnJheShjdHguYm9vay5jaGFwdGVycykua2V5cygpKSB7XG5cdFx0XHRcdGN0eC5zZXRfY2hhcHRlcihjaGFwdGVyX2krMSk7XG5cblx0XHRcdFx0Ly8gQXNzZW1ibGUgdmVyc2VzXG5cdFx0XHRcdGN0eC52ZXJzZXNfdGV4dCA9IFwiXCI7XG5cdFx0XHRcdGxldCB2ZXJzZSA9IDE7XG5cdFx0XHRcdHdoaWxlICh2ZXJzZSAhPSBjdHguZ2V0X3ZlcnNlX2NvdW50KCkrMSkge1xuXHRcdFx0XHRcdGN0eC52ZXJzZSA9IHZlcnNlO1xuXHRcdFx0XHRcdGN0eC52ZXJzZXNfdGV4dCArPSBjdHguZm9ybWF0X3ZlcnNlX2JvZHkoXG5cdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5idWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0aWYgKHZlcnNlICE9IGN0eC5nZXRfdmVyc2VfY291bnQoKSkge1xuXHRcdFx0XHRcdFx0Y3R4LnZlcnNlc190ZXh0ICs9IFwiXFxuXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZlcnNlICs9IDE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDaGFwdGVyIG5hbWVcblx0XHRcdFx0bGV0IGNoYXB0ZXJfbm90ZV9uYW1lID0gY3R4LmZvcm1hdF9jaGFwdGVyX25hbWUodGhpcyk7XG5cblx0XHRcdFx0Ly8gQ2hhcHRlciBib2R5XG5cdFx0XHRcdGxldCBub3RlX2JvZHkgPSBjdHguZm9ybWF0X2NoYXB0ZXJfYm9keSh0aGlzKTtcblxuXHRcdFx0XHQvLyBTYXZlIGZpbGVcblx0XHRcdFx0bGV0IGZpbGVfcGF0aCA9IG5vcm1hbGl6ZVBhdGgoYm9va19wYXRoICsgXCIvXCIgKyBjaGFwdGVyX25vdGVfbmFtZSArIFwiLm1kXCIpO1xuXHRcdFx0XHRsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlX3BhdGgpO1xuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdFx0ZmlsZV9wcm9taXNlcy5wdXNoKHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBub3RlX2JvZHkpKTtcblx0XHRcdFx0fSBlbHNlIGlmIChmaWxlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0ZmlsZV9wcm9taXNlcy5wdXNoKFxuXHRcdFx0XHRcdFx0dGhpcy5hcHAudmF1bHQuY3JlYXRlKFxuXHRcdFx0XHRcdFx0XHRmaWxlX3BhdGgsXG5cdFx0XHRcdFx0XHRcdG5vdGVfYm9keSxcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChmaWxlX3Byb21pc2VzKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBCdWlsZENvbnRleHQge1xuXHR0cmFuc2xhdGlvbjogc3RyaW5nXG5cdHRyYW5zbGF0aW9uX3RleHRzOiBUcmFuc2xhdGlvbkRhdGFcblx0Ym9va3M6IEFycmF5PEJvb2tEYXRhPlxuXHRib29rOiBCb29rRGF0YVxuXHRsYXN0X2Jvb2s6IEJvb2tEYXRhXG5cdG5leHRfYm9vazogQm9va0RhdGFcblx0Y2hhcHRlcjogbnVtYmVyXG5cdGxhc3RfY2hhcHRlcjogbnVtYmVyXG5cdG5leHRfY2hhcHRlcjogbnVtYmVyXG5cdGNoYXB0ZXJzOiBDaGFwdGVyRGF0YVxuXHRsYXN0X2NoYXB0ZXJzOiBDaGFwdGVyRGF0YVxuXHRuZXh0X2NoYXB0ZXJzOiBDaGFwdGVyRGF0YVxuXHRjaGFwdGVyX3ZlcnNlX2NvdW50OiBudW1iZXJcblx0dmVyc2VzX3RleHQ6IHN0cmluZ1xuXHR2ZXJzZTogbnVtYmVyXG5cdHZlcnNlX2NvdW50czogVmVyc2VDb3VudHNcblxuXHRmaW5kX2Jvb2soYm9va19pZDpCb29rSWQpOm51bWJlciB7XG5cdFx0Zm9yIChsZXQgaSBvZiB0aGlzLmJvb2tzLmtleXMoKSkge1xuXHRcdFx0aWYgKHRoaXMuYm9va3NbaV0uaWQgPT09IGJvb2tfaWQpIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vIGJvb2sgYnkgaWQgJHtib29rX2lkfVwiKTtcblx0fVxuXG5cdGFiYnJldmlhdGVfYm9va19uYW1lKG5hbWU6c3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gbmFtZS5yZXBsYWNlKFwiIFwiLCBcIlwiKS5zbGljZSgwLDMpO1xuXHR9XG5cblx0Zm9ybWF0X2Jvb2tfbmFtZShwbHVnaW46TXlCaWJsZSwgYm9vazpCb29rRGF0YSwgY2FzaW5nOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0bGV0IGRlbGltID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9kZWxpbWl0ZXI7XG5cdFx0bGV0IGJvb2tfbmFtZSA9IHRoaXMudG9fY2FzZShib29rLm5hbWUsIGNhc2luZywgZGVsaW0pO1xuXG5cdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQpIHtcblx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuYWJicmV2aWF0ZV9ib29rX25hbWUoYm9va19uYW1lKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcoYm9vay5pZClcblx0XHRcdFx0XHQucGFkU3RhcnQoMiAqIE51bWJlcihwbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0fVxuXG5cdGZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW46TXlCaWJsZSwgYm9vazpCb29rRGF0YSwgY2FzaW5nOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0bGV0IGRlbGltID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9kZWxpbWl0ZXI7XG5cdFx0bGV0IGJvb2tfbmFtZSA9IHRoaXMudG9fY2FzZShib29rLm5hbWUsIGNhc2luZywgZGVsaW0pO1xuXG5cdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQpIHtcblx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuYWJicmV2aWF0ZV9ib29rX25hbWUoYm9va19uYW1lKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYm9va19uYW1lXG5cdH1cblx0XG5cdGZvcm1hdF9jaGFwdGVyX2JvZHkocGx1Z2luOk15QmlibGUpOiBzdHJpbmcge1xuXHRcdGxldCBjYXNpbmcgPSBwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uO1xuXHRcdHJldHVybiBwbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9ib2R5X2Zvcm1hdFxuXHRcdFx0LnJlcGxhY2UoL3t2ZXJzZXN9L2csIHRoaXMudmVyc2VzX3RleHQpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHBsdWdpbiwgdGhpcy5ib29rLCBjYXNpbmcpKVxuXHRcdFx0LnJlcGxhY2UoXG5cdFx0XHRcdC97b3JkZXJ9L2csXG5cdFx0XHRcdFN0cmluZyh0aGlzLmJvb2suaWQpXG5cdFx0XHRcdFx0LnBhZFN0YXJ0KDIgKiBOdW1iZXIocGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlciksIFwiMFwiKVxuXHRcdFx0KVxuXHRcdFx0LnJlcGxhY2UoL3tjaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5jaGFwdGVyKSlcblx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcl9uYW1lfS9nLCB0aGlzLmZvcm1hdF9jaGFwdGVyX25hbWUocGx1Z2luKSlcblx0XHRcdC5yZXBsYWNlKC97bGFzdF9jaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5sYXN0X2NoYXB0ZXIpKVxuXHRcdFx0LnJlcGxhY2UoL3tsYXN0X2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbiwgXCJsYXN0XCIpKVxuXHRcdFx0LnJlcGxhY2UoL3tsYXN0X2NoYXB0ZXJfYm9va30vZywgdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLmxhc3RfYm9vaywgY2FzaW5nKSlcblx0XHRcdC5yZXBsYWNlKC97bmV4dF9jaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5uZXh0X2NoYXB0ZXIpKVxuXHRcdFx0LnJlcGxhY2UoL3tuZXh0X2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbiwgXCJuZXh0XCIpKVxuXHRcdFx0LnJlcGxhY2UoL3tuZXh0X2NoYXB0ZXJfYm9va30vZywgdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLm5leHRfYm9vaywgY2FzaW5nKSlcblx0XHRcdC5yZXBsYWNlKC97Zmlyc3RfY2hhcHRlcn0vZywgXCIxXCIpXG5cdFx0XHQucmVwbGFjZSgve2ZpcnN0X2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbiwgXCJmaXJzdFwiKSlcblx0XHRcdC5yZXBsYWNlKC97ZmluYWxfY2hhcHRlcn0vZywgU3RyaW5nKHRoaXMuYm9vay5jaGFwdGVycykpXG5cdFx0XHQucmVwbGFjZSgve2ZpbmFsX2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbiwgXCJmaW5hbFwiKSk7XG5cdH1cblxuXHRmb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbjpNeUJpYmxlLCB0ZW5zZTpzdHJpbmc9XCJjdXJyZW50XCIpOiBzdHJpbmcge1xuXHRcdGxldCBmb3JtYXQgPSBwbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9uYW1lX2Zvcm1hdDtcblx0XHRpZiAoZm9ybWF0Lmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRmb3JtYXQgPSBERUZBVUxUX1NFVFRJTkdTLmNoYXB0ZXJfbmFtZV9mb3JtYXQ7XG5cdFx0fVxuXHRcdGxldCBwYWRfYnkgPSAzO1xuXHRcdGlmICh0aGlzLmdldF92ZXJzZV9jb3VudCgpIDwgMTApIHtcblx0XHRcdHBhZF9ieSA9IDE7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmdldF92ZXJzZV9jb3VudCgpIDwgMTAwKSB7XG5cdFx0XHRwYWRfYnkgPSAyO1xuXHRcdH1cblxuXHRcdGxldCBjYXNpbmcgPSBwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uO1xuXHRcdGxldCBkZWxpbSA9IHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyO1xuXHRcdGxldCBib29rX25hbWUgPSBcIlwiO1xuXHRcdGxldCBjaGFwdGVyID0gLTE7XG5cdFx0c3dpdGNoICh0ZW5zZSkge1xuXHRcdFx0Y2FzZSBcImN1cnJlbnRcIjoge1xuXHRcdFx0XHRib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0Y2hhcHRlciA9IHRoaXMuY2hhcHRlclxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJsYXN0XCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLmxhc3RfYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0Y2hhcHRlciA9IHRoaXMubGFzdF9jaGFwdGVyXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcIm5leHRcIjoge1xuXHRcdFx0XHRib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMubmV4dF9ib29rLCBjYXNpbmcpO1xuXHRcdFx0XHRjaGFwdGVyID0gdGhpcy5uZXh0X2NoYXB0ZXJcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiZmlyc3RcIjoge1xuXHRcdFx0XHRib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0Y2hhcHRlciA9IDFcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiZmluYWxcIjoge1xuXHRcdFx0XHRib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0Y2hhcHRlciA9IHRoaXMuYm9vay5jaGFwdGVycztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbm1hdGNoZWQgc3dpdGNoIGNhc2UgYXQgdGVuc2UgJ3swfSdcIi5mb3JtYXQodGVuc2UpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZm9ybWF0XG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcodGhpcy5ib29rLmlkKVxuXHRcdFx0XHRcdC5wYWRTdGFydCgyICogTnVtYmVyKHBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIpLCBcIjBcIilcblx0XHRcdClcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve2NoYXB0ZXJ9L2csXG5cdFx0XHRcdFN0cmluZyhjaGFwdGVyKVxuXHRcdFx0XHRcdC5wYWRTdGFydChwYWRfYnkgKiBOdW1iZXIocGx1Z2luLnNldHRpbmdzLnBhZGRlZF9jaGFwdGVyKSwgXCIwXCIpLFxuXHRcdFx0KTtcblx0fVxuXG5cdGZvcm1hdF92ZXJzZV9ib2R5KHBsdWdpbjpNeUJpYmxlLCBidWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzOmJvb2xlYW4pOiBzdHJpbmcge1xuXHRcdGxldCBib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihcblx0XHRcdHBsdWdpbixcblx0XHRcdHRoaXMuYm9vayxcblx0XHRcdFwiY3VycmVudFwiLFxuXHRcdCk7XG5cblx0XHRsZXQgdmVyc2VfdGV4dCA9IFwiXCJcblx0XHRpZiAoYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlcykge1xuXHRcdFx0dmVyc2VfdGV4dCA9IFwiYGBgIHZlcnNlXFxuXCJcblx0XHRcdFx0KyBcIntib29rX2lkfSB7Y2hhcHRlcn0ge3ZlcnNlfSBcXG5cIlxuXHRcdFx0XHQrIFwiYGBgXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmVyc2VfdGV4dCA9IHRoaXMudHJhbnNsYXRpb25fdGV4dHMuYm9va3NbdGhpcy5ib29rLmlkXVt0aGlzLmNoYXB0ZXItMV1bdGhpcy52ZXJzZS0xXVxuXHRcdH1cblxuXHRcdHJldHVybiBwbHVnaW4uc2V0dGluZ3MudmVyc2VfYm9keV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKC97dmVyc2VfdGV4dH0vZywgdmVyc2VfdGV4dClcblx0XHRcdC5yZXBsYWNlKC97dmVyc2V9L2csIFN0cmluZyh0aGlzLnZlcnNlKSlcblx0XHRcdC5yZXBsYWNlKC97Ym9va30vZywgYm9va19uYW1lKVxuXHRcdFx0LnJlcGxhY2UoL3tib29rX2lkfS9nLCBTdHJpbmcodGhpcy5ib29rLmlkKSlcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcodGhpcy5ib29rLmlkKVxuXHRcdFx0XHRcdC5wYWRTdGFydCgyICogTnVtYmVyKHBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIpLCBcIjBcIilcblx0XHRcdClcblx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcn0vZywgU3RyaW5nKHRoaXMuY2hhcHRlcikpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKHBsdWdpbikpXG5cdFx0XHQucmVwbGFjZSgve2ZpbmFsX2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmJvb2suY2hhcHRlcnMpKVxuXHR9XG5cblx0c2V0X2Jvb2soYm9va19pZDpCb29rSWQpIHtcblx0XHRsZXQgYm9va19pID0gdGhpcy5maW5kX2Jvb2soYm9va19pZCk7XG5cdFx0dGhpcy5ib29rID0gdGhpcy5ib29rc1tib29rX2ldO1xuXG5cdFx0bGV0IGxhc3RfYm9va19pID0gdGhpcy5jaGFwdGVyICE9PSAxID8gYm9va19pIDogYm9va19pLTE7XG5cdFx0aWYgKGxhc3RfYm9va19pID09PSAtMSkge1xuXHRcdFx0bGFzdF9ib29rX2kgPSB0aGlzLmJvb2tzLmxlbmd0aC0xXG5cdFx0fVxuXHRcdHRoaXMubGFzdF9ib29rID0gdGhpcy5ib29rc1tsYXN0X2Jvb2tfaV07XG5cdFx0XG5cdFx0bGV0IG5leHRfYm9va19pID0gdGhpcy5jaGFwdGVyICE9PSB0aGlzLmJvb2suY2hhcHRlcnMgPyBib29rX2kgOiBib29rX2krMTtcblx0XHRpZiAobmV4dF9ib29rX2kgPT09IHRoaXMuYm9va3MubGVuZ3RoKSB7XG5cdFx0XHRuZXh0X2Jvb2tfaSA9IDBcblx0XHR9XG5cdFx0dGhpcy5uZXh0X2Jvb2sgPSB0aGlzLmJvb2tzW25leHRfYm9va19pXTtcblx0fVxuXG5cdHNldF9jaGFwdGVyKGNoYXB0ZXI6bnVtYmVyKSB7XG5cdFx0dGhpcy5jaGFwdGVyID0gY2hhcHRlcjtcblx0XHR0aGlzLnNldF9ib29rKHRoaXMuYm9vay5pZCk7XG5cdFx0dGhpcy5sYXN0X2NoYXB0ZXIgPSBjaGFwdGVyICE9PSAxID8gY2hhcHRlci0xIDogdGhpcy5sYXN0X2Jvb2suY2hhcHRlcnNcblx0XHR0aGlzLm5leHRfY2hhcHRlciA9IGNoYXB0ZXIgIT09IHRoaXMuYm9vay5jaGFwdGVycyA/IGNoYXB0ZXIrMSA6IDFcblx0fVxuXG5cdC8vIFNldHMgdGhlIGNhcGl0YWxpemF0aW9uIG9mIHRoZSBnaXZlbiBuYW1lIGRlcGVuZGluZyBvbiAqbmFtZV9jYXNlKi5cblx0dG9fY2FzZShuYW1lOnN0cmluZywgbmFtZV9jYXNlOnN0cmluZywgZGVsaW1ldGVyOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKG5hbWVfY2FzZSA9PSBcImxvd2VyX2Nhc2VcIikge1xuXHRcdFx0cmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csIGRlbGltZXRlcik7XG5cdFx0fSBlbHNlIGlmIChuYW1lX2Nhc2UgPT0gXCJ1cHBlcl9jYXNlXCIpIHtcblx0XHRcdHJldHVybiBuYW1lLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvIC9nLCBkZWxpbWV0ZXIpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZS5yZXBsYWNlKC8gL2csIGRlbGltZXRlcik7XG5cdH1cblxuXHRnZXRfdmVyc2VfY291bnQoKTpudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLnZlcnNlX2NvdW50cy5nZXRfY291bnRfZm9yKHRoaXMuYm9vay5pZCwgdGhpcy5jaGFwdGVyKTtcblx0fVxufVxuXG5jbGFzcyBWZXJzZUNvdW50cyB7XG5cdGJvb2tzOiBSZWNvcmQ8Qm9va0lkLCBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+PlxuXG5cdGdldF9jb3VudF9mb3IoYm9vazpCb29rSWQsIGNoYXB0ZXI6bnVtYmVyKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5ib29rc1tib29rXVtjaGFwdGVyXVxuXHR9XG59XG5cbmludGVyZmFjZSBUcmFuc2xhdGlvbkRhdGEge1xuXHR0cmFuc2xhdGlvbjogc3RyaW5nO1xuXHRib29rczogUmVjb3JkPEJvb2tJZCwgQXJyYXk8Q2hhcHRlckRhdGE+Pjtcbn1cblxuaW50ZXJmYWNlIEJvb2tDYWNoZSB7XG5cdHRyYW5zbGF0aW9uOiBTdHJpbmc7XG5cdGJvb2tfaWQ6IG51bWJlcjtcblx0ZGF0YTogQm9va0RhdGEgfCBudWxsO1xuXHRtdXRleDogTXV0ZXg7XG59XG5cbmludGVyZmFjZSBCb29rRGF0YSB7XG5cdGlkOiBudW1iZXI7XG5cdGNoYXB0ZXJzOiBudW1iZXI7XG5cdG5hbWU6IHN0cmluZztcbn1cblxudHlwZSBCb29rSWQgPSBudW1iZXI7XG5cbmludGVyZmFjZSBDaGFwdGVyQ2FjaGUge1xuXHR0cmFuc2xhdGlvbjogU3RyaW5nO1xuXHRib29rX2lkOiBudW1iZXI7XG5cdGNoYXB0ZXI6IE51bWJlcjtcblx0Y2hhcHRlcl9kYXRhOiBDaGFwdGVyRGF0YSB8IG51bGw7XG5cdG11dGV4OiBNdXRleDtcbn1cblxudHlwZSBDaGFwdGVyRGF0YSA9IEFycmF5PHN0cmluZz47XG5cbmludGVyZmFjZSBWZXJzZURhdGEge1xuXHRwazogc3RyaW5nLFxuXHR0ZXh0OiBzdHJpbmcsXG5cdHZlcnNlOiBudW1iZXIsXG59O1xuXG5jbGFzcyBCaWJsZUFQSSB7XG5cdGJvb2tfY2FjaGU6IFJlY29yZDxCb29rS2V5LCBCb29rQ2FjaGU+ID0ge307XG5cdGNhY2hlX2NsZWFyX3RpbWVyOiBQcm9taXNlPG51bGw+IHwgbnVsbCA9IG51bGw7XG5cdGNhY2hlX2NsZWFyX3RpbWVyX3Byb21pc2VfZXJyOiAocmVhc29uPzogYW55KSA9PiB2b2lkO1xuXHRjaGFwdGVyX2NhY2hlOiBSZWNvcmQ8Q2hhcHRlcktleSwgQ2hhcHRlckNhY2hlPiA9IHt9O1xuXHRwbHVnaW46IE15QmlibGU7XG5cblx0YXN5bmMgY2FjaGVfY2hhcHRlcihcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0Y2hhcHRlcl9kYXRhOiBDaGFwdGVyRGF0YSB8IG51bGwsXG5cdFx0c2F2ZV9sb2NhbGx5OiBib29sZWFuLFxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRsZXQga2V5ID0gdGhpcy5tYWtlX2NoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uLCBib29rX2lkLCBjaGFwdGVyKTtcblx0XHR0aGlzLmNoYXB0ZXJfY2FjaGVba2V5XSA9IHtcblx0XHRcdHRyYW5zbGF0aW9uOiB0cmFuc2xhdGlvbixcblx0XHRcdGJvb2tfaWQ6IGJvb2tfaWQsXG5cdFx0XHRjaGFwdGVyOiBjaGFwdGVyLFxuXHRcdFx0Y2hhcHRlcl9kYXRhOiBjaGFwdGVyX2RhdGEsXG5cdFx0XHRtdXRleDogbmV3IE11dGV4LFxuXHRcdH07XG5cblx0XHQvLyBTYXZlIGNoYXB0ZXIgdG8gbG9jYWwgZmlsZSBzeXRlbVxuXHRcdGlmIChzYXZlX2xvY2FsbHkpIHtcblx0XHRcdGxldCBjYWNoZV9wYXRoID0gdGhpcy5nZXRfY2FjaGVfcGF0aCgpO1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoY2FjaGVfcGF0aCk7XG5cdFx0XHRsZXQgY2FjaGVkX2ZpbGVfbmFtZSA9IFwiezB9IHsxfSB7Mn0udHh0XCJcblx0XHRcdFx0LmZvcm1hdCh0cmFuc2xhdGlvbiwgU3RyaW5nKGJvb2tfaWQpLCBTdHJpbmcoY2hhcHRlcikpO1xuXHRcdFx0bGV0IGNhY2hlZF9maWxlX3BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0XHRjYWNoZV9wYXRoICsgXCIvXCIgKyBjYWNoZWRfZmlsZV9uYW1lLFxuXHRcdFx0KTtcblx0XHRcdGlmIChcblx0XHRcdFx0Y2hhcHRlcl9kYXRhICE9IG51bGxcblx0XHRcdFx0JiYgIWF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhjYWNoZWRfZmlsZV9wYXRoKVxuXHRcdFx0KSB7XG5cdFx0XHRcdGxldCBib2R5ID0gXCJcIjtcblx0XHRcdFx0Zm9yIChsZXQgaSBvZiBjaGFwdGVyX2RhdGEua2V5cygpKSB7XG5cdFx0XHRcdFx0Ym9keSArPSBjaGFwdGVyX2RhdGFbaV07XG5cdFx0XHRcdFx0aWYgKGkgIT09IGNoYXB0ZXJfZGF0YS5sZW5ndGgtMSkge1xuXHRcdFx0XHRcdFx0Ym9keSArPSBcIlxcblwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKFxuXHRcdFx0XHRcdGNhY2hlZF9maWxlX3BhdGgsXG5cdFx0XHRcdFx0Ym9keSxcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTdGFydC9yZWZyZXNoIGNhY2hlIGNsZWFyIHRpbWVyXG5cdFx0aWYgKHRoaXMuY2FjaGVfY2xlYXJfdGltZXIgIT09IG51bGwgJiYgdGhpcy5jYWNoZV9jbGVhcl90aW1lcl9wcm9taXNlX2VyciAhPT0gbnVsbCkge1xuXHRcdFx0Ly8gQ2xlYXIgb3V0IG9sZCBwcm9taXNlXG5cdFx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyX3Byb21pc2VfZXJyKG51bGwpO1xuXHRcdH1cblx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyID0gbmV3IFByb21pc2UoKG9rLCBlcnIpID0+IHtcblx0XHRcdHRoaXMuY2FjaGVfY2xlYXJfdGltZXJfcHJvbWlzZV9lcnIgPSBlcnI7XG5cdFx0XHRzZXRUaW1lb3V0KG9rLCA2MDAwMCAqIDYwKSAvLyBUaW1lb3V0IGFmdGVyIDEgaG91clxuXHRcdH0pO1xuXHRcdHRoaXMuY2FjaGVfY2xlYXJfdGltZXJcblx0XHRcdC50aGVuKCgpID0+IHRoaXMuY2xlYXJfY2FjaGUoKSlcblx0XHRcdC5jYXRjaChlcnIgPT4geyB9KTtcblx0fVxuXG5cdGFzeW5jIGNsZWFyX2NhY2hlKCkge1xuXHRcdHRoaXMuY2hhcHRlcl9jYWNoZSA9IHt9O1xuXHRcdHRoaXMuY2FjaGVfY2xlYXJfdGltZXIgPSBudWxsO1xuXG5cdFx0bGV0IGNhY2hlX3BhdGggPSB0aGlzLmdldF9jYWNoZV9wYXRoKCk7XG5cdFx0aWYgKGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhjYWNoZV9wYXRoKSkge1xuXHRcdFx0aWYgKCFhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci50cmFzaFN5c3RlbShjYWNoZV9wYXRoKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci50cmFzaExvY2FsKGNhY2hlX3BhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cblx0YXN5bmMgYm9va19pZCh0cmFuc2xhdGlvbjpzdHJpbmcsIGJvb2tfbmFtZTpzdHJpbmcpIHtcblx0XHRsZXQgYm9va3MgPSBhd2FpdCB0aGlzLmdldF9ib29rcyh0cmFuc2xhdGlvbik7XG5cdFx0Zm9yIChsZXQgaSBvZiBib29rcy5rZXlzKCkpIHtcblx0XHRcdGlmIChib29rc1tpXS5uYW1lID09PSBib29rX25hbWUpIHtcblx0XHRcdFx0cmV0dXJuIGJvb2tzW2ldLmlkO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChib29rX25hbWUgaW4gREVGQVVMVF9OQU1FX01BUCkge1xuXHRcdFx0cmV0dXJuIERFRkFVTFRfTkFNRV9NQVBbYm9va19uYW1lXTtcblx0XHR9XG5cblx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcIlRyYW5zbGF0aW9uICd7MH0nIGhhcyBubyBib29rIG5hbWVkICd7MX0nXCJcblx0XHRcdFx0LmZvcm1hdCh0cmFuc2xhdGlvbiwgYm9va19uYW1lKVxuXHRcdCk7XG5cdH1cblxuXG5cdGFzeW5jIGdldF90cmFuc2xhdGlvbih0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxUcmFuc2xhdGlvbkRhdGE+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRhc3luYyBnZXRfYm9vayh0cmFuc2xhdGlvbjogc3RyaW5nLCBib29rX2lkOkJvb2tJZCk6IFByb21pc2U8Qm9va0RhdGE+IHtcblx0XHRsZXQgYm9va19rZXkgPSBcInswfSB7MX1cIi5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSk7XG5cblx0XHRpZiAoIShib29rX2tleSBpbiB0aGlzLmJvb2tfY2FjaGUpKSB7XG5cdFx0XHR0aGlzLmJvb2tfY2FjaGVbYm9va19rZXldID0ge1xuXHRcdFx0XHRib29rX2lkOiBib29rX2lkLFxuXHRcdFx0XHR0cmFuc2xhdGlvbjogdHJhbnNsYXRpb24sXG5cdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdG11dGV4OiBuZXcgTXV0ZXgsXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGxldCBjYWNoZWQgPSB0aGlzLmJvb2tfY2FjaGVbYm9va19rZXldO1xuXHRcdGlmIChjYWNoZWQuZGF0YSA9PT0gbnVsbCkge1xuXHRcdFx0YXdhaXQgY2FjaGVkLm11dGV4XG5cdFx0XHRcdC5hY3F1aXJlKClcblx0XHRcdFx0LnRoZW4oYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNhY2hlZC5kYXRhID0gYXdhaXQgdGhpcy5fZ2V0X2Jvb2sodHJhbnNsYXRpb24sIGJvb2tfaWQpO1xuXG5cdFx0XHRcdFx0Y2FjaGVkLm11dGV4LmNhbmNlbCgpO1xuXHRcdFx0XHRcdGNhY2hlZC5tdXRleC5yZWxlYXNlKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChlcnIgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnIgPT09IEVfQ0FOQ0VMRUQpIHtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZXJyKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGNhY2hlZC5kYXRhID09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcigpO1xuXHRcdH1cblxuXHRcdHJldHVybiBjYWNoZWQuZGF0YTtcblx0fVxuXG5cdGFzeW5jIF9nZXRfYm9vayh0cmFuc2xhdGlvbjogc3RyaW5nLCBib29rX2lkOkJvb2tJZCk6IFByb21pc2U8Qm9va0RhdGE+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRnZXRfYm9va3ModHJhbnNsYXRpb246IHN0cmluZywpOiBQcm9taXNlPEFycmF5PEJvb2tEYXRhPj4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cdGdldF9jYWNoZV9wYXRoKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5vcm1hbGl6ZVBhdGgodGhpcy5wbHVnaW4ubWFuaWZlc3QuZGlyICsgXCIvLm15YmlibGVjYWNoZVwiKTtcblx0fVxuXG5cdGFzeW5jIGdldF9jaGFwdGVyX2NhY2hlZChcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdCk6IFByb21pc2U8Q2hhcHRlckRhdGE+IHtcblx0XHRsZXQgY2hhcHRlcl9rZXkgPSB0aGlzLm1ha2VfY2hhcHRlcl9rZXkodHJhbnNsYXRpb24sIGJvb2tfaWQsIGNoYXB0ZXIpO1xuXG5cdFx0aWYgKCEoY2hhcHRlcl9rZXkgaW4gdGhpcy5jaGFwdGVyX2NhY2hlKSkge1xuXHRcdFx0dGhpcy5jYWNoZV9jaGFwdGVyKFxuXHRcdFx0XHR0cmFuc2xhdGlvbixcblx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0bnVsbCxcblx0XHRcdFx0ZmFsc2UsXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGxldCBjYWNoZWQgPSB0aGlzLmNoYXB0ZXJfY2FjaGVbY2hhcHRlcl9rZXldO1xuXG5cdFx0aWYgKGNhY2hlZC5jaGFwdGVyX2RhdGEgPT09IG51bGwpIHtcblx0XHRcdGF3YWl0IGNhY2hlZC5tdXRleFxuXHRcdFx0XHQuYWNxdWlyZSgpXG5cdFx0XHRcdC50aGVuKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RvcmVfbG9jYWxseSkge1xuXHRcdFx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBsb2FkIGNoYXB0ZXIgbG9jYWxseVxuXHRcdFx0XHRcdFx0bGV0IGNhY2hlZF9maWxlX25hbWUgPSBcInswfSB7MX0gezJ9LnR4dFwiXG5cdFx0XHRcdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKTtcblx0XHRcdFx0XHRcdGxldCBjYWNoZV9wYXRoID0gdGhpcy5nZXRfY2FjaGVfcGF0aCgpO1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoY2FjaGVfcGF0aCk7XG5cdFx0XHRcdFx0XHRsZXQgY2FjaGVkX2ZpbGVfcGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG5cdFx0XHRcdFx0XHRcdGNhY2hlX3BhdGggKyBcIi9cIiArIGNhY2hlZF9maWxlX25hbWVcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyXG5cdFx0XHRcdFx0XHRcdFx0LmV4aXN0cyhjYWNoZWRfZmlsZV9wYXRoKVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGxldCByYXcgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlclxuXHRcdFx0XHRcdFx0XHRcdC5yZWFkKGNhY2hlZF9maWxlX3BhdGgpO1xuXHRcdFx0XHRcdFx0XHRpZiAocmF3LnN0YXJ0c1dpdGgoXCJbXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGVkLmNoYXB0ZXJfZGF0YSA9IEpTT04ucGFyc2UocmF3KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjYWNoZWQuY2hhcHRlcl9kYXRhID0gcmF3LnNwbGl0KFwiXFxuXCIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGNhY2hlZC5jaGFwdGVyX2RhdGEgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdC8vIEZldGNoIGNoYXB0ZXIgZnJvbSB0aGUgd2ViXG5cdFx0XHRcdFx0XHRjYWNoZWQuY2hhcHRlcl9kYXRhID0gYXdhaXQgdGhpcy5nZXRfY2hhcHRlcl91bmNhY2hlZChcblx0XHRcdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0XHRcdGNoYXB0ZXIsXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhY2hlZC5tdXRleC5jYW5jZWwoKTtcblx0XHRcdFx0XHRjYWNoZWQubXV0ZXgucmVsZWFzZSgpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZXJyID0+IHtcblx0XHRcdFx0XHRpZiAoZXJyID09PSBFX0NBTkNFTEVEKSB7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChjYWNoZWQuY2hhcHRlcl9kYXRhID09PSBudWxsIHx8IGNhY2hlZC5jaGFwdGVyX2RhdGEubGVuZ3RoID09IDApIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLmNhY2hlX2NoYXB0ZXIoXG5cdFx0XHR0cmFuc2xhdGlvbixcblx0XHRcdGJvb2tfaWQsXG5cdFx0XHRjaGFwdGVyLFxuXHRcdFx0Y2FjaGVkLmNoYXB0ZXJfZGF0YSxcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JlX2xvY2FsbHksXG5cdFx0KTtcblxuXHRcdHJldHVybiBjYWNoZWQuY2hhcHRlcl9kYXRhO1xuXHR9XG5cblx0YXN5bmMgZ2V0X2NoYXB0ZXJfdW5jYWNoZWQoXG5cdFx0dHJhbnNsYXRpb246IHN0cmluZyxcblx0XHRib29rX2lkOiBudW1iZXIsXG5cdFx0Y2hhcHRlcjogbnVtYmVyLFxuXHQpOiBQcm9taXNlPENoYXB0ZXJEYXRhPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0YXN5bmMgZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRnZXRfdHJhbnNsYXRpb25zKCk6IFByb21pc2U8VHJhbnNsYXRpb25zPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0Z2V0X3ZlcnNlKFxuXHRcdHRyYW5zbGF0aW9uOiBzdHJpbmcsXG5cdFx0Ym9va19pZDogbnVtYmVyLFxuXHRcdGNoYXB0ZXI6IG51bWJlcixcblx0XHR2ZXJzZTogbnVtYmVyLFxuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cblx0YXN5bmMgZ2V0X3ZlcnNlX2NvdW50KHRyYW5zbGF0aW9uOnN0cmluZyk6IFByb21pc2U8VmVyc2VDb3VudHM+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXG5cdG1ha2VfY2hhcHRlcl9rZXkodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDogbnVtYmVyLCBjaGFwdGVyOiBOdW1iZXIpIHtcblx0XHRyZXR1cm4gXCJ7MH0uezF9LnsyfVwiLmZvcm1hdCh0cmFuc2xhdGlvbiwgU3RyaW5nKGJvb2tfaWQpLCBTdHJpbmcoY2hhcHRlcikpO1xuXHR9XG59XG5cbnR5cGUgQm9va0tleSA9IHN0cmluZztcbnR5cGUgQ2hhcHRlcktleSA9IHN0cmluZztcblxudHlwZSBUcmFuc2xhdGlvbnMgPSBSZWNvcmQ8c3RyaW5nLCBUcmFuc2xhdGlvbj47XG5pbnRlcmZhY2UgVHJhbnNsYXRpb24ge1xuXHRkaXNwbGF5X25hbWU6IHN0cmluZyxcblx0YWJicmV2aWF0ZWRfbmFtZTogc3RyaW5nLFxuXHRsYW5ndWFnZTogc3RyaW5nLFxufVxuXG5cbmNsYXNzIEJvbGxzTGlmZUJpYmxlQVBJIGV4dGVuZHMgQmlibGVBUEkge1xuXHRwbHVnaW46IE15QmlibGU7XG5cdGNoYXB0ZXJfY2FjaGU6IFJlY29yZDxDaGFwdGVyS2V5LCBDaGFwdGVyQ2FjaGU+ID0ge307XG5cdHRyYW5zbGF0aW9uczogVHJhbnNsYXRpb25zID0ge307XG5cdHRyYW5zbGF0aW9uX21hcHM6IFJlY29yZDxzdHJpbmcsIEFycmF5PEJvb2tEYXRhPj4gPSB7fTtcblx0Y2FjaGVfY2xlYXJfdGltZXI6IFByb21pc2U8bnVsbD4gfCBudWxsID0gbnVsbDtcblx0Ym9va19tdXRleDpNdXRleCA9IG5ldyBNdXRleDtcblxuXHRfY2hhcHRlcl9rZXkodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDogbnVtYmVyLCBjaGFwdGVyOiBOdW1iZXIpIHtcblx0XHRyZXR1cm4gXCJ7MH0uezF9LnsyfVwiLmZvcm1hdCh0cmFuc2xhdGlvbiwgU3RyaW5nKGJvb2tfaWQpLCBTdHJpbmcoY2hhcHRlcikpO1xuXHR9XG5cblx0YXN5bmMgX2dlbmVyYXRlX3RyYW5zbGF0aW9uX21hcCh0cmFuc2xhdGlvbjogc3RyaW5nKSB7XG5cdFx0bGV0IG1hcDogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gPSBhd2FpdCByZXF1ZXN0VXJsKFxuXHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvZ2V0LWJvb2tzL3swfS9cIi5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KS5qc29uO1xuXHRcdGxldCBib29rX2RhdGE6IEFycmF5PEJvb2tEYXRhPiA9IFtdO1xuXHRcdGZvciAobGV0IGl0ZW0gb2YgbWFwKSB7XG5cdFx0XHRib29rX2RhdGEucHVzaCh7XG5cdFx0XHRcdG5hbWU6IGl0ZW1bXCJuYW1lXCJdLFxuXHRcdFx0XHRjaGFwdGVyczogaXRlbVtcImNoYXB0ZXJzXCJdLFxuXHRcdFx0XHRpZDogaXRlbVtcImJvb2tpZFwiXSxcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLnRyYW5zbGF0aW9uX21hcHNbdHJhbnNsYXRpb25dID0gYm9va19kYXRhO1xuXHR9XG5cblx0YXN5bmMgX2Jvb2tfdG9faWQodHJhbnNsYXRpb246IHN0cmluZywgYm9vazogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcblx0XHRsZXQgYm9va18gPSBib29rLnRvTG93ZXJDYXNlKCk7XG5cdFx0bGV0IG1hcCA9IGF3YWl0IHRoaXMuX2dldF90cmFuc2xhdGlvbl9tYXAoXCJZTFRcIik7IC8vIFRPRE86IE1ha2UgdHJhbnNsYXRpb24gYWNjb3JkaW5nIHRvIHVzZXIgc2V0dGluZ3Ncblx0XHRmb3IgKGxldCBpIGluIG1hcCkge1xuXHRcdFx0bGV0IGJvb2tfZGF0YSA9IG1hcFtpXTtcblx0XHRcdGlmIChib29rXyA9PSBib29rX2RhdGFbXCJuYW1lXCJdLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRcdFx0cmV0dXJuIE51bWJlcihpKSArIDE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRocm93IG5ldyBFcnJvcignTm8gYm9vayBleGlzdHMgYnkgbmFtZSB7MH0uJy5mb3JtYXQoYm9vaykpO1xuXHR9XG5cblx0YXN5bmMgX2lkX3RvX2Jvb2sodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRsZXQgbWFwID0gYXdhaXQgdGhpcy5fZ2V0X3RyYW5zbGF0aW9uX21hcChcIllMVFwiKTsgLy8gVE9ETzogTWFrZSB0cmFuc2xhdGlvbiBhY2NvcmRpbmcgdG8gdXNlciBzZXR0aW5nc1xuXHRcdHJldHVybiBtYXBbYm9va19pZCAtIDFdW1wibmFtZVwiXTtcblx0fVxuXG5cdGFzeW5jIGdldF9jaGFwdGVyX3VuY2FjaGVkKFxuXHRcdHRyYW5zbGF0aW9uOiBzdHJpbmcsXG5cdFx0Ym9va19pZDogbnVtYmVyLFxuXHRcdGNoYXB0ZXI6IG51bWJlcixcblx0KTogUHJvbWlzZTxDaGFwdGVyRGF0YT4ge1xuXHRcdC8vIEZldGNoIGNoYXB0ZXIgZnJvbSB0aGUgd2ViXG5cdFx0dHJ5IHtcblx0XHRcdGxldCBjaGFwdGVyX2RhdGEgPSBKU09OLnBhcnNlKGF3YWl0IGh0dHBHZXQoXG5cdFx0XHRcdFwiaHR0cHM6Ly9ib2xscy5saWZlL2dldC1jaGFwdGVyL3swfS97MX0vezJ9L1wiXG5cdFx0XHRcdFx0LmZvcm1hdCh0cmFuc2xhdGlvbiwgU3RyaW5nKGJvb2tfaWQpLCBTdHJpbmcoY2hhcHRlcikpXG5cdFx0XHQpKS5tYXAoKHg6IFZlcnNlRGF0YSkgPT4geC50ZXh0KTtcblxuXHRcdFx0cmV0dXJuIGNoYXB0ZXJfZGF0YTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZS5zdGFydHNXaXRoKFwiTm8gYm9vayBleGlzdHMgYnkgbmFtZVwiKSkge1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIF9nZXRfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEJvb2tEYXRhPj4ge1xuXHRcdGlmICghKHRyYW5zbGF0aW9uIGluIHRoaXMudHJhbnNsYXRpb25fbWFwcykpIHtcblx0XHRcdGF3YWl0IHRoaXMuX2dlbmVyYXRlX3RyYW5zbGF0aW9uX21hcCh0cmFuc2xhdGlvbik7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnRyYW5zbGF0aW9uX21hcHNbdHJhbnNsYXRpb25dO1xuXHR9XG5cblx0YXN5bmMgZ2V0X3RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uOiBzdHJpbmcpOiBQcm9taXNlPFRyYW5zbGF0aW9uRGF0YT4ge1xuXHRcdGxldCB2ZXJzZXMgPSBKU09OLnBhcnNlKFxuXHRcdFx0YXdhaXQgaHR0cEdldChcblx0XHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvc3RhdGljL3RyYW5zbGF0aW9ucy97MH0uanNvblwiLmZvcm1hdCh0cmFuc2xhdGlvbilcblx0XHRcdClcblx0XHQpO1xuXG5cdFx0bGV0IGJpYmxlOiBUcmFuc2xhdGlvbkRhdGEgPSB7XG5cdFx0XHR0cmFuc2xhdGlvbjogdHJhbnNsYXRpb24sXG5cdFx0XHRib29rczoge30sXG5cdFx0fTtcblxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKGFzeW5jIChvaywgZXJyKSA9PiB7XG5cdFx0XHRsZXQgaSA9IDA7XG5cdFx0XHRsZXQgY3Vycl9ib29rX2lkID0gLTE7XG5cdFx0XHRsZXQgY3Vycl9jaGFwdGVyID0gLTE7XG5cdFx0XHR3aGlsZSAoaSAhPSB2ZXJzZXMubGVuZ3RoKSB7XG5cdFx0XHRcdGxldCB2ZXJzZV9qc29uID0gdmVyc2VzW2ldO1xuXHRcdFx0XHRpZiAoY3Vycl9ib29rX2lkICE9IHZlcnNlX2pzb25bXCJib29rXCJdKSB7XG5cdFx0XHRcdFx0Y3Vycl9ib29rX2lkID0gdmVyc2VfanNvbltcImJvb2tcIl1cblx0XHRcdFx0XHRiaWJsZS5ib29rc1tjdXJyX2Jvb2tfaWRdID0gW107XG5cdFx0XHRcdFx0Y3Vycl9jaGFwdGVyID0gLTFcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3Vycl9jaGFwdGVyICE9IHZlcnNlX2pzb25bXCJjaGFwdGVyXCJdKSB7XG5cdFx0XHRcdFx0Y3Vycl9jaGFwdGVyID0gdmVyc2VfanNvbltcImNoYXB0ZXJcIl07XG5cdFx0XHRcdFx0bGV0IGJvb2tfZGF0YSA9IGJpYmxlLmJvb2tzW2N1cnJfYm9va19pZF07XG5cdFx0XHRcdFx0Ym9va19kYXRhLnB1c2goW10pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJpYmxlLmJvb2tzW2N1cnJfYm9va19pZF1bY3Vycl9jaGFwdGVyIC0gMV0ucHVzaCh2ZXJzZV9qc29uW1widGV4dFwiXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblx0XHRcdG9rKG51bGwpO1xuXHRcdH0pXG5cblx0XHRyZXR1cm4gYmlibGU7XG5cdH1cblxuXHRhc3luYyBfZ2V0X2Jvb2sodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDpCb29rSWQpOiBQcm9taXNlPEJvb2tEYXRhPiB7XG5cdFx0bGV0IGJvb2tzID0gYXdhaXQgdGhpcy5nZXRfYm9va3ModHJhbnNsYXRpb24pO1xuXHRcdGZvciAobGV0IGJvb2sgb2YgYm9va3MpIHtcblx0XHRcdGlmIChib29rLmlkID09IGJvb2tfaWQpIHtcblx0XHRcdFx0dGhpcy5ib29rX211dGV4LmNhbmNlbCgpO1xuXHRcdFx0XHR0aGlzLmJvb2tfbXV0ZXgucmVsZWFzZSgpO1xuXHRcdFx0XHRyZXR1cm4gYm9vaztcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKCk7XG5cdH1cblxuXHRhc3luYyBnZXRfYm9va3ModHJhbnNsYXRpb246IHN0cmluZyk6IFByb21pc2U8Qm9va0RhdGFbXT4ge1xuXHRcdGxldCBib29rcyA9IGF3YWl0IHRoaXMuX2dldF90cmFuc2xhdGlvbl9tYXAodHJhbnNsYXRpb24pO1xuXHRcdGJvb2tzLnNvcnQoZnVuY3Rpb24oeCwgeSkge1xuXHRcdFx0aWYgKHguaWQgPCB5LmlkKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHRcdGlmICh4LmlkID4geS5pZCkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAwO1xuXHRcdH0pO1xuXHRcdHJldHVybiBib29rcztcblx0fVxuXG5cdGFzeW5jIGdldF9kZWZhdWx0X3RyYW5zbGF0aW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0cmV0dXJuIFwiWUxUXCI7XG5cdH1cblxuXHRhc3luYyBnZXRfdHJhbnNsYXRpb25zKCk6IFByb21pc2U8VHJhbnNsYXRpb25zPiB7XG5cdFx0aWYgKE9iamVjdC5rZXlzKHRoaXMudHJhbnNsYXRpb25zKS5sZW5ndGggPT09IDApIHtcblx0XHRcdGxldCBsaXN0ID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9zdGF0aWMvYm9sbHMvYXBwL3ZpZXdzL2xhbmd1YWdlcy5qc29uXCJcblx0XHRcdCkpO1xuXHRcdFx0Zm9yIChsZXQgbGFuZ3VhZ2Ugb2YgbGlzdCkge1xuXHRcdFx0XHRmb3IgKGxldCBpdGVtIG9mIGxhbmd1YWdlW1widHJhbnNsYXRpb25zXCJdKSB7XG5cdFx0XHRcdFx0aWYgKGl0ZW1bXCJzaG9ydF9uYW1lXCJdIGluIHRoaXMudHJhbnNsYXRpb25zKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2xhdGlvbiBhbHJlYWR5IGFkZGVkIHRvIG1hcFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy50cmFuc2xhdGlvbnNbaXRlbVtcInNob3J0X25hbWVcIl1dID0ge1xuXHRcdFx0XHRcdFx0YWJicmV2aWF0ZWRfbmFtZTogaXRlbVtcInNob3J0X25hbWVcIl0sXG5cdFx0XHRcdFx0XHRkaXNwbGF5X25hbWU6IGl0ZW1bXCJmdWxsX25hbWVcIl0sXG5cdFx0XHRcdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2VbXCJsYW5ndWFnZVwiXSxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnRyYW5zbGF0aW9ucztcblx0fVxuXG5cdGFzeW5jIGdldF92ZXJzZShcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0dmVyc2U6IG51bWJlcixcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRsZXQgY2hhcHRlcl9kYXRhID0gYXdhaXQgdGhpcy5nZXRfY2hhcHRlcl9jYWNoZWQoXG5cdFx0XHR0cmFuc2xhdGlvbixcblx0XHRcdGJvb2tfaWQsXG5cdFx0XHRjaGFwdGVyLFxuXHRcdCk7XG5cblx0XHRyZXR1cm4gY2hhcHRlcl9kYXRhW3ZlcnNlIC0gMV0gfHwgXCJcIjtcblx0fVxuXG5cdGFzeW5jIGdldF92ZXJzZV9jb3VudCh0cmFuc2xhdGlvbjpzdHJpbmcpOiBQcm9taXNlPFZlcnNlQ291bnRzPiB7XG5cdFx0bGV0IGpzb24gPSBKU09OLnBhcnNlKGF3YWl0IGh0dHBHZXQoXG5cdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9nZXQtdmVyc2UtY291bnRzL3swfS9cIi5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KSk7XG5cdFx0bGV0IGNvdW50cyA9IG5ldyBWZXJzZUNvdW50cygpO1xuXHRcdGNvdW50cy5ib29rcyA9IGpzb247XG5cdFx0cmV0dXJuIGNvdW50c1xuXHR9XG59XG5cbmNsYXNzIEVycm9yTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogTXlCaWJsZVxuXHR0aXRsZTogc3RyaW5nXG5cdGJvZHk6IHN0cmluZ1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUsIHRpdGxlOnN0cmluZywgYm9keTpzdHJpbmcpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcblx0XHR0aGlzLmJvZHkgPSBib2R5O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiB0aGlzLnRpdGxlIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB0aGlzLmJvZHkgfSk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHt9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBDbGVhckNhY2hlRmlsZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0bGV0IGJpYmxlX3BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJsZV9mb2xkZXI7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiQ2xlYXIgY2FjaGU/XCIgfSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBcIllvdSBhcmUgYWJvdXQgdG8gY2xlYXIgb3V0IGFsbCBjYWNoZWQgY2hhcHRlcnMgZnJvbSB5b3VyIGZpbGUgc3lzdGVtLiBUaGlzIGluY2x1ZGVzIHRyYW5zbGF0aW9ucyB5b3UgbWFudWFsbHkgZG93bmxvYWRlZC5cIlxuXHRcdFx0XHQuZm9ybWF0KGJpYmxlX3BhdGgpXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OiBcIkRvIHlvdSB3YW50IHRvIGNsZWFyIHRoZSBjYWNoZT9cIlxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNsZWFyIGNhY2hlXCIpXG5cdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYmlibGVfYXBpLmNsZWFyX2NhY2hlKCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2FjaGUgY2xlYXJlZCFcIik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIENsZWFyT2xkQmlibGVGaWxlc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwbHVnaW46IE15QmlibGU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRsZXQgYmlibGVfcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYmxlX2ZvbGRlcjtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJCaWJsZSBmb2xkZXIgaXMgbm90IGVtcHR5XCIgfSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlRoZSBCaWJsZSBmb2xkZXIgaW4geW91ciBzZXR0aW5ncyBpcyBub3QgZW1wdHkuIElmIHlvdSBidWlsdCBhIEJpYmxlIGluIHRoaXMgZm9sZGVyIGJlZm9yZSB0aGUgbmV3IGJpYmxlIG1heSBiZSBpbnRlcmxhY2VkIHdpdGggdGhlIG9sZCBvbmUuXCJcblx0XHRcdFx0LmZvcm1hdChiaWJsZV9wYXRoKVxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJEbyB5b3Ugd2FudCB0byBjbGVhciB0aGUgZm9sZGVyIGJlZm9yZSBidWlsZGluZyB5b3VyIEJpYmxlP1wiXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQnVpbGQgd2l0aG91dCBjbGVhcmluZ1wiKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoQlVJTERfU1RBUlRfVE9BU1QpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYnVpbGRfYmlibGUoYmlibGVfcGF0aCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKEJVSUxEX0VORF9UT0FTVCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDbGVhciBhbmQgYnVpbGRcIilcblx0XHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKEJVSUxEX1NUQVJUX1RPQVNUKTtcblx0XHRcdFx0XHRcdGxldCBsaXN0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KGJpYmxlX3BhdGgpO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgcGF0aCBvZiBsaXN0LmZpbGVzKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBhYnN0cmFjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcblx0XHRcdFx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRpZiAoYWJzdHJhY3QgIT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShhYnN0cmFjdCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGZvciAobGV0IHBhdGggb2YgbGlzdC5mb2xkZXJzKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBhYnN0cmFjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcblx0XHRcdFx0XHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRpZiAoYWJzdHJhY3QgIT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShhYnN0cmFjdCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmJ1aWxkX2JpYmxlKGJpYmxlX3BhdGgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShCVUlMRF9FTkRfVE9BU1QpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBEb3dubG9hZEJpYmxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogTXlCaWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGxldCB0cmFuc2xhdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zbGF0aW9uO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkRvd25sb2FkIGJpYmxlP1wiIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogXCJZb3UgYXJlIGFib3V0IHRvIGRvd25sb2FkIHRoZSBlbnRpcmUgezB9IHRyYW5zbGF0aW9uIG9mIHRoZSBCaWJsZSwgYWNjb3JkaW5nIHRvIHlvdXIgc2V0dGluZ3MuXCJcblx0XHRcdFx0LmZvcm1hdCh0cmFuc2xhdGlvbilcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdHRleHQ6IFwiRG8geW91IHdhbnQgdG8gY29udGludWU/XCJcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHt9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJEb3dubG9hZFwiKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHRcdHRoaXMuZG93bmxvYWRCaWJsZSh0cmFuc2xhdGlvbik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG5cblx0YXN5bmMgZG93bmxvYWRCaWJsZSh0cmFuc2xhdGlvbjogc3RyaW5nKSB7XG5cdFx0bmV3IE5vdGljZShcblx0XHRcdCdTdGFydGVkIGRvd25sb2FkIG9mIHRoZSB7MH0gdHJhbnNsYXRpb24hJ1xuXHRcdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdCk7XG5cblx0XHRsZXQgYmlibGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uKTtcblx0XHRmb3IgKGNvbnN0IGJvb2tfaWQgaW4gYmlibGUuYm9va3MpIHtcblx0XHRcdGZvciAobGV0IGNoYXB0ZXIgb2YgQXJyYXkoYmlibGUuYm9va3NbYm9va19pZF0ubGVuZ3RoKS5rZXlzKCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYmlibGVfYXBpLmNhY2hlX2NoYXB0ZXIoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0TnVtYmVyKGJvb2tfaWQpLFxuXHRcdFx0XHRcdGNoYXB0ZXIgKyAxLFxuXHRcdFx0XHRcdGJpYmxlLmJvb2tzW2Jvb2tfaWRdW2NoYXB0ZXJdLFxuXHRcdFx0XHRcdHRydWUsXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShcblx0XHRcdCdDb21wbGV0ZWQgZG93bmxvYWQgb2YgdGhlIHswfSB0cmFuc2xhdGlvbiEnXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KTtcblx0fVxufVxuXG5jbGFzcyBTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IE15QmlibGU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdUcmFuc2xhdGlvbicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIHZlcnNpb24gb2YgdGhlIEJpYmxlIHRvIGRpc3BsYXkuJylcblx0XHRcdC5hZGREcm9wZG93bihhc3luYyBkcm9wID0+IHtcblx0XHRcdFx0bGV0IHRyYW5zbGF0aW9ucyA9IGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5nZXRfdHJhbnNsYXRpb25zKCk7XG5cdFx0XHRcdGZvciAoY29uc3Qga2V5IGluIHRyYW5zbGF0aW9ucykge1xuXHRcdFx0XHRcdGRyb3AuYWRkT3B0aW9uKFxuXHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0XCJ7MH0gLSB7MX0gLSB7Mn1cIi5mb3JtYXQoXG5cdFx0XHRcdFx0XHRcdHRyYW5zbGF0aW9uc1trZXldLmxhbmd1YWdlLFxuXHRcdFx0XHRcdFx0XHRrZXksXG5cdFx0XHRcdFx0XHRcdHRyYW5zbGF0aW9uc1trZXldLmRpc3BsYXlfbmFtZSxcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Aub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zbGF0aW9uID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdGRyb3Auc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudHJhbnNsYXRpb24pO1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdCaWJsZSBmb2xkZXInKVxuXHRcdFx0LnNldERlc2MoJ0EgcGF0aCB0byB0aGUgZm9sZGVyIHdoZXJlIGFsbCB0aGUgZmlsZXMgZm9yIHRoZSBiaWJsZSB3aWxsIGJlIHBsYWNlZC4gSWYgdGhlIHBhdGggZG9lcyBub3QgZXhpc3QgaXQgd2lsbCBiZSBjcmVhdGVkLicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogXCIgKyBERUZBVUxUX1NFVFRJTkdTLmJpYmxlX2ZvbGRlcilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYmxlX2ZvbGRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYmxlX2ZvbGRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldEhlYWRpbmcoKVxuXHRcdFx0LnNldE5hbWUoXCJCb29rIEZvcm1hdHRpbmdcIilcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0Jvb2sgbmFtZSBjYXBpdGFsaXphdGlvbicpXG5cdFx0XHQuc2V0RGVzYygnQ2FwaXRhbGl6YXRpb24gZm9yIHRoZSBuYW1lcyBvZiB0aGUgbm90ZXMgb2YgZWFjaCBib29rLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcCA9PiBkcm9wXG5cdFx0XHRcdC5hZGRPcHRpb24oXCJsb3dlcl9jYXNlXCIsIFwiTG93ZXIgY2FzZVwiKVxuXHRcdFx0XHQuYWRkT3B0aW9uKFwibmFtZV9jYXNlXCIsIFwiTmFtZSBjYXNlXCIpXG5cdFx0XHRcdC5hZGRPcHRpb24oXCJ1cHBlcl9jYXNlXCIsIFwiVXBwZXIgY2FzZVwiKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQWJicmV2aWF0ZSBib29rIG5hbWVzJylcblx0XHRcdC5zZXREZXNjKCdBYmJyZXZpYXRlcyBib29rIG5hbWVzIHRvIHRocmVlIGxldHRlcnMgc28gdGhhdCwgZm9yIGV4YW1wbGUsIFwiR2VuZXNpc1wiIGJlY29tZXMgXCJHZW5cIiBhbmQgXCIxIEtpbmdzXCIgYmVjb21lcyBcIjFLaVwiLiAoTWF5IGNhdXNlIGlzc3VlcyBpbiBzb21lIGxhbmd1YWdlcyknKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdQYWRkZWQgb3JkZXIgbnVtYmVycycpXG5cdFx0XHQuc2V0RGVzYygnV2hlbiBPTiwgY2hhbmdlcyBcIntvcmRlcn1cIiBpbiB0aGUgbmFtZXMgb2YgYm9vayBmb2xkZXJzIHRvIGJlIHBhZGRlZCB3aXRoIGV4dHJhIHplcm9zLiBGb3IgZXhhbXBsZSwgXCIxIEdlbmVzaXNcIiB3b3VsZCBiZWNvbWUgXCIwMSBHZW5zaXNcIiB3aGVuIHR1cm5lZCBPTi4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdCb29rIG5hbWUgZGVsaW1pdGVyJylcblx0XHRcdC5zZXREZXNjKCdUaGUgY2hhcmFjdGVycyBzZXBhcmF0aW5nIHdvcmRzIGluIGJvb2sgbmFtZXMsIHN1Y2ggYXMgdGhlIHNwYWNlcyBpbiBcIjEgSm9oblwiIG9yIFwiU29uZyBvZiBTb2xvbW9uXCIuJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IFwiJyArIERFRkFVTFRfU0VUVElOR1MuYm9va19uYW1lX2Zvcm1hdCArICdcIicpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2RlbGltaXRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblxuXHRcdFxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQm9vayBuYW1lIGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnRm9ybWF0dGluZyBmb3IgdGhlIG5hbWVzIG9mIHRoZSBmb2xkZXJzIG9mIGVhY2ggYm9vayBvZiB0aGUgYmlibGUuIEZvciBleGFtcGxlLCBcIntvcmRlcn0ge25hbWV9XCIgd291bGQgYmVjb21lIFwiMiBFeG9kdXNcIi4gTGVhdmUgYmxhbmsgdG8gbm90IGhhdmUgZm9sZGVycyBmb3IgZWFjaCBib29rLicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogXCIgKyBERUZBVUxUX1NFVFRJTkdTLmJvb2tfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldEhlYWRpbmcoKVxuXHRcdFx0LnNldE5hbWUoXCJDaGFwdGVyIEZvcm1hdHRpbmdcIilcblxuXHRcdFxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGFkZGVkIGNoYXB0ZXIgbnVtYmVycycpXG5cdFx0XHQuc2V0RGVzYygnV2hlbiBPTiwgY2hhbmdlcyBcIntjaGFwdGVyfVwiIChhbmQgcmVsYXRlZCkgaW4gdGhlIG5hbWVzIG9mIGNoYXB0ZXJzIHRvIGJlIHBhZGRlZCB3aXRoIGV4dHJhIHplcm9zLiBGb3IgZXhhbXBsZSwgXCJQc2FsbXMgNVwiIHdvdWxkIGJlY29tZSBcIlBzYWxtcyAwMDVcIiB3aGVuIHR1cm5lZCBPTi4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfY2hhcHRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9jaGFwdGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQ2hhcHRlciBuYW1lIGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnRm9ybWF0dGluZyBmb3IgdGhlIG5hbWVzIG9mIHRoZSBub3RlcyBvZiBlYWNoIGNoYXB0ZXIgb2YgYSBib29rLiBGb3IgZXhhbXBsZSwgXCJ7Ym9va30ge2NoYXB0ZXJ9XCIgd291bGQgYmVjb21lIFwiUHNhbG1zIDIzLm1kXCIuJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9uYW1lX2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX25hbWVfZm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQ2hhcHRlciBib2R5IGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnRm9ybWF0dGluZyBmb3IgdGhlIGJvZHkgb2YgY2hhcHRlciBub3Rlcy4nKVxuXHRcdFx0LmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJFeGFtcGxlOiBcIiArIERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9ib2R5X2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfYm9keV9mb3JtYXQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2JvZHlfZm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldEhlYWRpbmcoKVxuXHRcdFx0LnNldE5hbWUoXCJWZXJzZSBGb3JtYXR0aW5nXCIpXG5cdFx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdCdWlsZCB3aXRoIGR5bmFtaWMgdmVyc2VzJylcblx0XHRcdC5zZXREZXNjKCdXaGVuIE9OLCB0aGUgdGV4dCBvZiB2ZXJzZXMgd2lsbCBiZSBzYXZlZCBhcyB2ZXJzZSByZWZlcmVuY2VzIHRoYXQgYXJlIGxvYWRlZCBhcyB5b3UgcmVhZCBpdC4gV2hlbiBPRkYsIHNhdmVzIHRoZSB0ZXh0IGZvciB5b3VyIGN1cnJlbnQgdHJhbnNsYXRpb24gaW50byB0aGUgYnVpbHQgZmlsZXMuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlcylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdWZXJzZSBib2R5IGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnRm9ybWF0dGluZyBmb3IgdGhlIGJvZHkgb2YgdmVyc2VzIGluIGNoYXB0ZXJzLicpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFwiICsgREVGQVVMVF9TRVRUSU5HUy52ZXJzZV9ib2R5X2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlX2JvZHlfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyc2VfYm9keV9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXRIZWFkaW5nKClcblx0XHRcdC5zZXROYW1lKFwiRGF0YVwiKVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU2F2ZSBiaWJsZSBsb2NhbGx5Jylcblx0XHRcdC5zZXREZXNjKCdXaGVuIE9OLCBjYWNoZXMgdmlld2VkIGNoYXB0ZXJzIG9uIHRoZSBsb2NhbCBmaWxlIHN5c3RlbSwgc28gdGhhdCB0aGV5IGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGFuIGludGVybmV0IGNvbm5lY3Rpb24uJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RvcmVfbG9jYWxseSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JlX2xvY2FsbHkgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpXG5cblx0fVxufVxuXG5jb25zdCBERUZBVUxUX05BTUVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBCb29rSWQ+ID0ge1xuXHRcIkdlbmVzaXNcIjogMSxcblx0XCJFeG9kdXNcIjogMixcblx0XCJMZXZpdGljdXNcIjogMyxcblx0XCJOdW1iZXJzXCI6IDQsXG5cdFwiRGV1dGVyb25vbXlcIjogNSxcblx0XCJKb3NodWFcIjogNixcblx0XCJKdWRnZXNcIjogNyxcblx0XCJSdXRoXCI6IDgsXG5cdFwiMSBTYW11ZWxcIjogOSxcblx0XCIyIFNhbXVlbFwiOiAxMCxcblx0XCIxIEtpbmdzXCI6IDExLFxuXHRcIjIgS2luZ3NcIjogMTIsXG5cdFwiMSBDaHJvbmljbGVzXCI6IDEzLFxuXHRcIjIgQ2hyb25pY2xlc1wiOiAxNCxcblx0XCJFenJhXCI6IDE1LFxuXHRcIk5laGVtaWFoXCI6IDE2LFxuXHRcIkVzdGhlclwiOiAxNyxcblx0XCJKb2JcIjogMTgsXG5cdFwiUHNhbG1zXCI6IDE5LFxuXHRcIlBzYWxtXCI6IDE5LCAvLyBBbHRlcm5hdGUgc3BlbGxpbmdcblx0XCJQcm92ZXJic1wiOiAyMCxcblx0XCJFY2NsZXNpYXN0ZXNcIjogMjEsXG5cdFwiU29uZyBvZiBTb2xvbW9uXCI6IDIyLFxuXHRcIklzYWlhaFwiOiAyMyxcblx0XCJKZXJlbWlhaFwiOiAyNCxcblx0XCJMYW1lbnRhdGlvbnNcIjogMjUsXG5cdFwiRXpla2llbFwiOiAyNixcblx0XCJEYW5pZWxcIjogMjcsXG5cdFwiSG9zZWFcIjogMjgsXG5cdFwiSm9lbFwiOiAyOSxcblx0XCJBbW9zXCI6IDMwLFxuXHRcIk9iYWRpYWhcIjogMzEsXG5cdFwiSm9uYWhcIjogMzIsXG5cdFwiTWljYWhcIjogMzMsXG5cdFwiTmFodW1cIjogMzQsXG5cdFwiSGFiYWtrdWtcIjogMzUsXG5cdFwiWmVwaGFuaWFoXCI6IDM2LFxuXHRcIkhhZ2dhaVwiOiAzNyxcblx0XCJaZWNoYXJpYWhcIjogMzgsXG5cdFwiTWFsYWNoaVwiOiAzOSxcblx0XCJNYXR0aGV3XCI6IDQwLFxuXHRcIk1hcmtcIjogNDEsXG5cdFwiTHVrZVwiOiA0Mixcblx0XCJKb2huXCI6IDQzLFxuXHRcIkFjdHNcIjogNDQsXG5cdFwiUm9tYW5zXCI6IDQ1LFxuXHRcIjEgQ29yaW50aGlhbnNcIjogNDYsXG5cdFwiMiBDb3JpbnRoaWFuc1wiOiA0Nyxcblx0XCJHYWxhdGlhbnNcIjogNDgsXG5cdFwiRXBoZXNpYW5zXCI6IDQ5LFxuXHRcIlBoaWxpcHBpYW5zXCI6IDUwLFxuXHRcIkNvbG9zc2lhbnNcIjogNTEsXG5cdFwiMSBUaGVzc2Fsb25pYW5zXCI6IDUyLFxuXHRcIjIgVGhlc3NhbG9uaWFuc1wiOiA1Myxcblx0XCIxIFRpbW90aHlcIjogNTQsXG5cdFwiMiBUaW1vdGh5XCI6IDU1LFxuXHRcIlRpdHVzXCI6IDU2LFxuXHRcIlBoaWxlbW9uXCI6IDU3LFxuXHRcIkhlYnJld3NcIjogNTgsXG5cdFwiSmFtZXNcIjogNTksXG5cdFwiMSBQZXRlclwiOiA2MCxcblx0XCIyIFBldGVyXCI6IDYxLFxuXHRcIjEgSm9oblwiOiA2Mixcblx0XCIyIEpvaG5cIjogNjMsXG5cdFwiMyBKb2huXCI6IDY0LFxuXHRcIkp1ZGVcIjogNjUsXG5cdFwiUmV2ZWxhdGlvblwiOiA2Nixcblx0XCIxIEVzZHJhc1wiOiA2Nyxcblx0XCJUb2JpdFwiOiA2OCxcblx0XCJKdWRpdGhcIjogNjksXG5cdFwiV2lzZG9tXCI6IDcwLFxuXHRcIlNpcmFjaFwiOiA3MSxcblx0XCJFcGlzdGxlIG9mIEplcmVtaWFoXCI6IDcyLFxuXHRcIkJhcnVjaFwiOiA3Myxcblx0XCIxIE1hY2NhYmVlc1wiOiA3NCxcblx0XCIyIE1hY2NhYmVlc1wiOiA3NSxcblx0XCIyIEVzZHJhc1wiOiA3NywgLy8gSnVtcCBpbiBudW1iZXJcblx0XCJTdXNhbm5hXCI6IDc4LFxuXHRcIkJlbCBhbmQgRHJhZ29uXCI6IDc5LFxuXHRcIlByYXllciBvZiBNYW5hc3NlaFwiOiA4MywgLy8gSnVtcCBpbiBudW1iZXJcblx0XCJBemFyaWFoXCI6IDg4LCAvLyBKdW1wIGluIG51bWJlclxufSIsICJjb25zdCBFX1RJTUVPVVQgPSBuZXcgRXJyb3IoJ3RpbWVvdXQgd2hpbGUgd2FpdGluZyBmb3IgbXV0ZXggdG8gYmVjb21lIGF2YWlsYWJsZScpO1xuY29uc3QgRV9BTFJFQURZX0xPQ0tFRCA9IG5ldyBFcnJvcignbXV0ZXggYWxyZWFkeSBsb2NrZWQnKTtcbmNvbnN0IEVfQ0FOQ0VMRUQgPSBuZXcgRXJyb3IoJ3JlcXVlc3QgZm9yIGxvY2sgY2FuY2VsZWQnKTtcblxudmFyIF9fYXdhaXRlciQyID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5jbGFzcyBTZW1hcGhvcmUge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2NhbmNlbEVycm9yID0gRV9DQU5DRUxFRCkge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fY2FuY2VsRXJyb3IgPSBfY2FuY2VsRXJyb3I7XG4gICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzID0gW107XG4gICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVycyA9IFtdO1xuICAgIH1cbiAgICBhY3F1aXJlKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0pXG4gICAgICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzW3dlaWdodCAtIDFdLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrLCB3ZWlnaHQgPSAxKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIkMih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgcmVsZWFzZV0gPSB5aWVsZCB0aGlzLmFjcXVpcmUod2VpZ2h0KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdhaXRGb3JVbmxvY2sod2VpZ2h0ID0gMSkge1xuICAgICAgICBpZiAod2VpZ2h0IDw9IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgd2VpZ2h0ICR7d2VpZ2h0fTogbXVzdCBiZSBwb3NpdGl2ZWApO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdKVxuICAgICAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdLnB1c2gocmVzb2x2ZSk7XG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNMb2NrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZSA8PSAwO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgIH1cbiAgICByZWxlYXNlKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgKz0gd2VpZ2h0O1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzLmZvckVhY2goKHF1ZXVlKSA9PiBxdWV1ZS5mb3JFYWNoKChlbnRyeSkgPT4gZW50cnkucmVqZWN0KHRoaXMuX2NhbmNlbEVycm9yKSkpO1xuICAgICAgICB0aGlzLl93ZWlnaHRlZFF1ZXVlcyA9IFtdO1xuICAgIH1cbiAgICBfZGlzcGF0Y2goKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgZm9yIChsZXQgd2VpZ2h0ID0gdGhpcy5fdmFsdWU7IHdlaWdodCA+IDA7IHdlaWdodC0tKSB7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZUVudHJ5ID0gKF9hID0gdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFxdWV1ZUVudHJ5KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNXZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSAtPSB3ZWlnaHQ7XG4gICAgICAgICAgICB3ZWlnaHQgPSB0aGlzLl92YWx1ZSArIDE7XG4gICAgICAgICAgICBxdWV1ZUVudHJ5LnJlc29sdmUoW3ByZXZpb3VzVmFsdWUsIHRoaXMuX25ld1JlbGVhc2VyKHByZXZpb3VzV2VpZ2h0KV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RyYWluVW5sb2NrV2FpdGVycygpO1xuICAgIH1cbiAgICBfbmV3UmVsZWFzZXIod2VpZ2h0KSB7XG4gICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZSh3ZWlnaHQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBfZHJhaW5VbmxvY2tXYWl0ZXJzKCkge1xuICAgICAgICBmb3IgKGxldCB3ZWlnaHQgPSB0aGlzLl92YWx1ZTsgd2VpZ2h0ID4gMDsgd2VpZ2h0LS0pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdLmZvckVhY2goKHdhaXRlcikgPT4gd2FpdGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdID0gW107XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBfX2F3YWl0ZXIkMSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuY2xhc3MgTXV0ZXgge1xuICAgIGNvbnN0cnVjdG9yKGNhbmNlbEVycm9yKSB7XG4gICAgICAgIHRoaXMuX3NlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSwgY2FuY2VsRXJyb3IpO1xuICAgIH1cbiAgICBhY3F1aXJlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyJDEodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBbLCByZWxlYXNlcl0gPSB5aWVsZCB0aGlzLl9zZW1hcGhvcmUuYWNxdWlyZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbGVhc2VyO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW1hcGhvcmUucnVuRXhjbHVzaXZlKCgpID0+IGNhbGxiYWNrKCkpO1xuICAgIH1cbiAgICBpc0xvY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbWFwaG9yZS5pc0xvY2tlZCgpO1xuICAgIH1cbiAgICB3YWl0Rm9yVW5sb2NrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLndhaXRGb3JVbmxvY2soKTtcbiAgICB9XG4gICAgcmVsZWFzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NlbWFwaG9yZS5pc0xvY2tlZCgpKVxuICAgICAgICAgICAgdGhpcy5fc2VtYXBob3JlLnJlbGVhc2UoKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLmNhbmNlbCgpO1xuICAgIH1cbn1cblxudmFyIF9fYXdhaXRlciA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuZnVuY3Rpb24gd2l0aFRpbWVvdXQoc3luYywgdGltZW91dCwgdGltZW91dEVycm9yID0gRV9USU1FT1VUKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNxdWlyZTogKHdlaWdodCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHdlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlzVGltZW91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpc1RpbWVvdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWNrZXQgPSB5aWVsZCBzeW5jLmFjcXVpcmUod2VpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IEFycmF5LmlzQXJyYXkodGlja2V0KSA/IHRpY2tldFsxXSA6IHRpY2tldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aWNrZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrLCB3ZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbGVhc2UgPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlja2V0ID0geWllbGQgdGhpcy5hY3F1aXJlKHdlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRpY2tldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSB0aWNrZXRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY2FsbGJhY2sodGlja2V0WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSB0aWNrZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZWxlYXNlKHdlaWdodCkge1xuICAgICAgICAgICAgc3luYy5yZWxlYXNlKHdlaWdodCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW5jLmNhbmNlbCgpO1xuICAgICAgICB9LFxuICAgICAgICB3YWl0Rm9yVW5sb2NrOiAod2VpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAod2VpZ2h0ICE9PSB1bmRlZmluZWQgJiYgd2VpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgd2VpZ2h0ICR7d2VpZ2h0fTogbXVzdCBiZSBwb3NpdGl2ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBzeW5jLndhaXRGb3JVbmxvY2sod2VpZ2h0KS50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KHRpbWVvdXRFcnJvciksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzTG9ja2VkOiAoKSA9PiBzeW5jLmlzTG9ja2VkKCksXG4gICAgICAgIGdldFZhbHVlOiAoKSA9PiBzeW5jLmdldFZhbHVlKCksXG4gICAgICAgIHNldFZhbHVlOiAodmFsdWUpID0+IHN5bmMuc2V0VmFsdWUodmFsdWUpLFxuICAgIH07XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGlzbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuZnVuY3Rpb24gdHJ5QWNxdWlyZShzeW5jLCBhbHJlYWR5QWNxdWlyZWRFcnJvciA9IEVfQUxSRUFEWV9MT0NLRUQpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiB3aXRoVGltZW91dChzeW5jLCAwLCBhbHJlYWR5QWNxdWlyZWRFcnJvcik7XG59XG5cbmV4cG9ydCB7IEVfQUxSRUFEWV9MT0NLRUQsIEVfQ0FOQ0VMRUQsIEVfVElNRU9VVCwgTXV0ZXgsIFNlbWFw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RUFDWixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxnQkFBZ0I7QUFBQSxFQUNoQixnQkFBZ0I7QUFBQSxFQUNoQixRQUFRO0FBQUEsRUFDUixZQUFZO0FBQUEsRUFDWixVQUFVO0FBQUEsRUFDVixPQUFPO0FBQUEsRUFDUCxVQUFVO0FBQUEsRUFDVixTQUFTO0FBQUE7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLGdCQUFnQjtBQUFBLEVBQ2hCLG1CQUFtQjtBQUFBLEVBQ25CLFVBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGdCQUFnQjtBQUFBLEVBQ2hCLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLGFBQWE7QUFBQSxFQUNiLFVBQVU7QUFBQSxFQUNWLGFBQWE7QUFBQSxFQUNiLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLGVBQWU7QUFBQSxFQUNmLGNBQWM7QUFBQSxFQUNkLG1CQUFtQjtBQUFBLEVBQ25CLG1CQUFtQjtBQUFBLEVBQ25CLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLGNBQWM7QUFBQSxFQUNkLFlBQVk7QUFBQSxFQUNaLFNBQVM7QUFBQSxFQUNULFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLHVCQUF1QjtBQUFBLEVBQ3ZCLFVBQVU7QUFBQSxFQUNWLGVBQWU7QUFBQSxFQUNmLGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsa0JBQWtCO0FBQUEsRUFDbEIsc0JBQXNCO0FBQUE7QUFBQSxFQUN0QixXQUFXO0FBQUE7QUFDWjsiLAogICJuYW1lcyI6IFsidmVyc2UiXQp9Cg==
